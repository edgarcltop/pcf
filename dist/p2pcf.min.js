var yl=Object.create;var Ar=Object.defineProperty;var bl=Object.getOwnPropertyDescriptor;var El=Object.getOwnPropertyNames;var ml=Object.getPrototypeOf,vl=Object.prototype.hasOwnProperty;var xl=(e,t)=>()=>(e&&(t=e(e=0)),t);var C=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Rl=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of El(t))!vl.call(e,r)&&r!==n&&Ar(e,r,{get:()=>t[r],enumerable:!(i=bl(t,r))||i.enumerable});return e};var lt=(e,t,n)=>(n=e!=null?yl(ml(e)):{},Rl(t||!e||!e.__esModule?Ar(n,"default",{value:e,enumerable:!0}):n,e));var Or=C(un=>{"use strict";_();un.byteLength=Tl;un.toByteArray=Al;un.fromByteArray=Ol;var le=[],ne=[],Sl=typeof Uint8Array<"u"?Uint8Array:Array,ti="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(He=0,kr=ti.length;He<kr;++He)le[He]=ti[He],ne[ti.charCodeAt(He)]=He;var He,kr;ne["-".charCodeAt(0)]=62;ne["_".charCodeAt(0)]=63;function Ir(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var i=n===t?0:4-n%4;return[n,i]}function Tl(e){var t=Ir(e),n=t[0],i=t[1];return(n+i)*3/4-i}function Cl(e,t,n){return(t+n)*3/4-n}function Al(e){var t,n=Ir(e),i=n[0],r=n[1],a=new Sl(Cl(e,i,r)),o=0,s=r>0?i-4:i,u;for(u=0;u<s;u+=4)t=ne[e.charCodeAt(u)]<<18|ne[e.charCodeAt(u+1)]<<12|ne[e.charCodeAt(u+2)]<<6|ne[e.charCodeAt(u+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return r===2&&(t=ne[e.charCodeAt(u)]<<2|ne[e.charCodeAt(u+1)]>>4,a[o++]=t&255),r===1&&(t=ne[e.charCodeAt(u)]<<10|ne[e.charCodeAt(u+1)]<<4|ne[e.charCodeAt(u+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function kl(e){return le[e>>18&63]+le[e>>12&63]+le[e>>6&63]+le[e&63]}function Il(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),r.push(kl(i));return r.join("")}function Ol(e){for(var t,n=e.length,i=n%3,r=[],a=16383,o=0,s=n-i;o<s;o+=a)r.push(Il(e,o,o+a>s?s:o+a));return i===1?(t=e[n-1],r.push(le[t>>2]+le[t<<4&63]+"==")):i===2&&(t=(e[n-2]<<8)+e[n-1],r.push(le[t>>10]+le[t>>4&63]+le[t<<2&63]+"=")),r.join("")}});var Lr=C(ni=>{_();ni.read=function(e,t,n,i,r){var a,o,s=r*8-i-1,u=(1<<s)-1,l=u>>1,f=-7,h=n?r-1:0,p=n?-1:1,c=e[t+h];for(h+=p,a=c&(1<<-f)-1,c>>=-f,f+=s;f>0;a=a*256+e[t+h],h+=p,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=i;f>0;o=o*256+e[t+h],h+=p,f-=8);if(a===0)a=1-l;else{if(a===u)return o?NaN:(c?-1:1)*(1/0);o=o+Math.pow(2,i),a=a-l}return(c?-1:1)*o*Math.pow(2,a-i)};ni.write=function(e,t,n,i,r,a){var o,s,u,l=a*8-r-1,f=(1<<l)-1,h=f>>1,p=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=i?0:a-1,w=i?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=p/u:t+=p*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,r),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;e[n+c]=s&255,c+=w,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;e[n+c]=o&255,c+=w,o/=256,l-=8);e[n+c-w]|=m*128}});var Ze=C(ct=>{"use strict";_();var ii=Or(),ut=Lr(),Dr=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ct.Buffer=d;ct.SlowBuffer=Ml;ct.INSPECT_MAX_BYTES=50;var hn=2147483647;ct.kMaxLength=hn;d.TYPED_ARRAY_SUPPORT=Ll();!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Ll(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(!!d.isBuffer(this))return this.buffer}});Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(!!d.isBuffer(this))return this.byteOffset}});function be(e){if(e>hn)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return si(e)}return Mr(e,t,n)}d.poolSize=8192;function Mr(e,t,n){if(typeof e=="string")return Nl(e,t);if(ArrayBuffer.isView(e))return Fl(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(fe(e,ArrayBuffer)||e&&fe(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(fe(e,SharedArrayBuffer)||e&&fe(e.buffer,SharedArrayBuffer)))return ai(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(i!=null&&i!==e)return d.from(i,t,n);let r=Bl(e);if(r)return r;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}d.from=function(e,t,n){return Mr(e,t,n)};Object.setPrototypeOf(d.prototype,Uint8Array.prototype);Object.setPrototypeOf(d,Uint8Array);function Ur(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Dl(e,t,n){return Ur(e),e<=0?be(e):t!==void 0?typeof n=="string"?be(e).fill(t,n):be(e).fill(t):be(e)}d.alloc=function(e,t,n){return Dl(e,t,n)};function si(e){return Ur(e),be(e<0?0:li(e)|0)}d.allocUnsafe=function(e){return si(e)};d.allocUnsafeSlow=function(e){return si(e)};function Nl(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=Pr(e,t)|0,i=be(n),r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}function ri(e){let t=e.length<0?0:li(e.length)|0,n=be(t);for(let i=0;i<t;i+=1)n[i]=e[i]&255;return n}function Fl(e){if(fe(e,Uint8Array)){let t=new Uint8Array(e);return ai(t.buffer,t.byteOffset,t.byteLength)}return ri(e)}function ai(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&n===void 0?i=new Uint8Array(e):n===void 0?i=new Uint8Array(e,t):i=new Uint8Array(e,t,n),Object.setPrototypeOf(i,d.prototype),i}function Bl(e){if(d.isBuffer(e)){let t=li(e.length)|0,n=be(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||ui(e.length)?be(0):ri(e);if(e.type==="Buffer"&&Array.isArray(e.data))return ri(e.data)}function li(e){if(e>=hn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hn.toString(16)+" bytes");return e|0}function Ml(e){return+e!=e&&(e=0),d.alloc(+e)}d.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==d.prototype};d.compare=function(t,n){if(fe(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),fe(n,Uint8Array)&&(n=d.from(n,n.offset,n.byteLength)),!d.isBuffer(t)||!d.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let i=t.length,r=n.length;for(let a=0,o=Math.min(i,r);a<o;++a)if(t[a]!==n[a]){i=t[a],r=n[a];break}return i<r?-1:r<i?1:0};d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};d.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return d.alloc(0);let i;if(n===void 0)for(n=0,i=0;i<t.length;++i)n+=t[i].length;let r=d.allocUnsafe(n),a=0;for(i=0;i<t.length;++i){let o=t[i];if(fe(o,Uint8Array))a+o.length>r.length?(d.isBuffer(o)||(o=d.from(o)),o.copy(r,a)):Uint8Array.prototype.set.call(r,o,a);else if(d.isBuffer(o))o.copy(r,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=o.length}return r};function Pr(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||fe(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&n===0)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return oi(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return Gr(e).length;default:if(r)return i?-1:oi(e).length;t=(""+t).toLowerCase(),r=!0}}d.byteLength=Pr;function Ul(e,t,n){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Gl(this,t,n);case"utf8":case"utf-8":return zr(this,t,n);case"ascii":return Wl(this,t,n);case"latin1":case"binary":return Yl(this,t,n);case"base64":return $l(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kl(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}d.prototype._isBuffer=!0;function $e(e,t,n){let i=e[t];e[t]=e[n],e[n]=i}d.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)$e(this,n,n+1);return this};d.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)$e(this,n,n+3),$e(this,n+1,n+2);return this};d.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)$e(this,n,n+7),$e(this,n+1,n+6),$e(this,n+2,n+5),$e(this,n+3,n+4);return this};d.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?zr(this,0,t):Ul.apply(this,arguments)};d.prototype.toLocaleString=d.prototype.toString;d.prototype.equals=function(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:d.compare(this,t)===0};d.prototype.inspect=function(){let t="",n=ct.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};Dr&&(d.prototype[Dr]=d.prototype.inspect);d.prototype.compare=function(t,n,i,r,a){if(fe(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),i===void 0&&(i=t?t.length:0),r===void 0&&(r=0),a===void 0&&(a=this.length),n<0||i>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&n>=i)return 0;if(r>=a)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,a>>>=0,this===t)return 0;let o=a-r,s=i-n,u=Math.min(o,s),l=this.slice(r,a),f=t.slice(n,i);for(let h=0;h<u;++h)if(l[h]!==f[h]){o=l[h],s=f[h];break}return o<s?-1:s<o?1:0};function qr(e,t,n,i,r){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,ui(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0)if(r)n=0;else return-1;if(typeof t=="string"&&(t=d.from(t,i)),d.isBuffer(t))return t.length===0?-1:Nr(e,t,n,i,r);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Nr(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function Nr(e,t,n,i,r){let a=1,o=e.length,s=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,n/=2}function u(f,h){return a===1?f[h]:f.readUInt16BE(h*a)}let l;if(r){let f=-1;for(l=n;l<o;l++)if(u(e,l)===u(t,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===s)return f*a}else f!==-1&&(l-=l-f),f=-1}else for(n+s>o&&(n=o-s),l=n;l>=0;l--){let f=!0;for(let h=0;h<s;h++)if(u(e,l+h)!==u(t,h)){f=!1;break}if(f)return l}return-1}d.prototype.includes=function(t,n,i){return this.indexOf(t,n,i)!==-1};d.prototype.indexOf=function(t,n,i){return qr(this,t,n,i,!0)};d.prototype.lastIndexOf=function(t,n,i){return qr(this,t,n,i,!1)};function Pl(e,t,n,i){n=Number(n)||0;let r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;let a=t.length;i>a/2&&(i=a/2);let o;for(o=0;o<i;++o){let s=parseInt(t.substr(o*2,2),16);if(ui(s))return o;e[n+o]=s}return o}function ql(e,t,n,i){return cn(oi(t,e.length-n),e,n,i)}function zl(e,t,n,i){return cn(Ql(t),e,n,i)}function jl(e,t,n,i){return cn(Gr(t),e,n,i)}function Hl(e,t,n,i){return cn(ef(t,e.length-n),e,n,i)}d.prototype.write=function(t,n,i,r){if(n===void 0)r="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")r=n,i=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(i)?(i=i>>>0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-n;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return Pl(this,t,n,i);case"utf8":case"utf-8":return ql(this,t,n,i);case"ascii":case"latin1":case"binary":return zl(this,t,n,i);case"base64":return jl(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Hl(this,t,n,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $l(e,t,n){return t===0&&n===e.length?ii.fromByteArray(e):ii.fromByteArray(e.slice(t,n))}function zr(e,t,n){n=Math.min(e.length,n);let i=[],r=t;for(;r<n;){let a=e[r],o=null,s=a>239?4:a>223?3:a>191?2:1;if(r+s<=n){let u,l,f,h;switch(s){case 1:a<128&&(o=a);break;case 2:u=e[r+1],(u&192)===128&&(h=(a&31)<<6|u&63,h>127&&(o=h));break;case 3:u=e[r+1],l=e[r+2],(u&192)===128&&(l&192)===128&&(h=(a&15)<<12|(u&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=e[r+1],l=e[r+2],f=e[r+3],(u&192)===128&&(l&192)===128&&(f&192)===128&&(h=(a&15)<<18|(u&63)<<12|(l&63)<<6|f&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),r+=s}return Zl(i)}var Fr=4096;function Zl(e){let t=e.length;if(t<=Fr)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=Fr));return n}function Wl(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]&127);return i}function Yl(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function Gl(e,t,n){let i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let a=t;a<n;++a)r+=tf[e[a]];return r}function Kl(e,t,n){let i=e.slice(t,n),r="";for(let a=0;a<i.length-1;a+=2)r+=String.fromCharCode(i[a]+i[a+1]*256);return r}d.prototype.slice=function(t,n){let i=this.length;t=~~t,n=n===void 0?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);let r=this.subarray(t,n);return Object.setPrototypeOf(r,d.prototype),r};function Z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(t,n,i){t=t>>>0,n=n>>>0,i||Z(t,n,this.length);let r=this[t],a=1,o=0;for(;++o<n&&(a*=256);)r+=this[t+o]*a;return r};d.prototype.readUintBE=d.prototype.readUIntBE=function(t,n,i){t=t>>>0,n=n>>>0,i||Z(t,n,this.length);let r=this[t+--n],a=1;for(;n>0&&(a*=256);)r+=this[t+--n]*a;return r};d.prototype.readUint8=d.prototype.readUInt8=function(t,n){return t=t>>>0,n||Z(t,1,this.length),this[t]};d.prototype.readUint16LE=d.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||Z(t,2,this.length),this[t]|this[t+1]<<8};d.prototype.readUint16BE=d.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||Z(t,2,this.length),this[t]<<8|this[t+1]};d.prototype.readUint32LE=d.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||Z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};d.prototype.readUint32BE=d.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||Z(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};d.prototype.readBigUInt64LE=ke(function(t){t=t>>>0,ht(t,"offset");let n=this[t],i=this[t+7];(n===void 0||i===void 0)&&Dt(t,this.length-8);let r=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))});d.prototype.readBigUInt64BE=ke(function(t){t=t>>>0,ht(t,"offset");let n=this[t],i=this[t+7];(n===void 0||i===void 0)&&Dt(t,this.length-8);let r=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(r)<<BigInt(32))+BigInt(a)});d.prototype.readIntLE=function(t,n,i){t=t>>>0,n=n>>>0,i||Z(t,n,this.length);let r=this[t],a=1,o=0;for(;++o<n&&(a*=256);)r+=this[t+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*n)),r};d.prototype.readIntBE=function(t,n,i){t=t>>>0,n=n>>>0,i||Z(t,n,this.length);let r=n,a=1,o=this[t+--r];for(;r>0&&(a*=256);)o+=this[t+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*n)),o};d.prototype.readInt8=function(t,n){return t=t>>>0,n||Z(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};d.prototype.readInt16LE=function(t,n){t=t>>>0,n||Z(t,2,this.length);let i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};d.prototype.readInt16BE=function(t,n){t=t>>>0,n||Z(t,2,this.length);let i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};d.prototype.readInt32LE=function(t,n){return t=t>>>0,n||Z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};d.prototype.readInt32BE=function(t,n){return t=t>>>0,n||Z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};d.prototype.readBigInt64LE=ke(function(t){t=t>>>0,ht(t,"offset");let n=this[t],i=this[t+7];(n===void 0||i===void 0)&&Dt(t,this.length-8);let r=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});d.prototype.readBigInt64BE=ke(function(t){t=t>>>0,ht(t,"offset");let n=this[t],i=this[t+7];(n===void 0||i===void 0)&&Dt(t,this.length-8);let r=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)});d.prototype.readFloatLE=function(t,n){return t=t>>>0,n||Z(t,4,this.length),ut.read(this,t,!0,23,4)};d.prototype.readFloatBE=function(t,n){return t=t>>>0,n||Z(t,4,this.length),ut.read(this,t,!1,23,4)};d.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||Z(t,8,this.length),ut.read(this,t,!0,52,8)};d.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||Z(t,8,this.length),ut.read(this,t,!1,52,8)};function V(e,t,n,i,r,a){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(t,n,i,r){if(t=+t,n=n>>>0,i=i>>>0,!r){let s=Math.pow(2,8*i)-1;V(this,t,n,i,s,0)}let a=1,o=0;for(this[n]=t&255;++o<i&&(a*=256);)this[n+o]=t/a&255;return n+i};d.prototype.writeUintBE=d.prototype.writeUIntBE=function(t,n,i,r){if(t=+t,n=n>>>0,i=i>>>0,!r){let s=Math.pow(2,8*i)-1;V(this,t,n,i,s,0)}let a=i-1,o=1;for(this[n+a]=t&255;--a>=0&&(o*=256);)this[n+a]=t/o&255;return n+i};d.prototype.writeUint8=d.prototype.writeUInt8=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,1,255,0),this[n]=t&255,n+1};d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function jr(e,t,n,i,r){Yr(t,i,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,n}function Hr(e,t,n,i,r){Yr(t,i,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a=a>>8,e[n+6]=a,a=a>>8,e[n+5]=a,a=a>>8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o=o>>8,e[n+2]=o,o=o>>8,e[n+1]=o,o=o>>8,e[n]=o,n+8}d.prototype.writeBigUInt64LE=ke(function(t,n=0){return jr(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});d.prototype.writeBigUInt64BE=ke(function(t,n=0){return Hr(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});d.prototype.writeIntLE=function(t,n,i,r){if(t=+t,n=n>>>0,!r){let u=Math.pow(2,8*i-1);V(this,t,n,i,u-1,-u)}let a=0,o=1,s=0;for(this[n]=t&255;++a<i&&(o*=256);)t<0&&s===0&&this[n+a-1]!==0&&(s=1),this[n+a]=(t/o>>0)-s&255;return n+i};d.prototype.writeIntBE=function(t,n,i,r){if(t=+t,n=n>>>0,!r){let u=Math.pow(2,8*i-1);V(this,t,n,i,u-1,-u)}let a=i-1,o=1,s=0;for(this[n+a]=t&255;--a>=0&&(o*=256);)t<0&&s===0&&this[n+a+1]!==0&&(s=1),this[n+a]=(t/o>>0)-s&255;return n+i};d.prototype.writeInt8=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};d.prototype.writeInt16LE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};d.prototype.writeInt16BE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};d.prototype.writeInt32LE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};d.prototype.writeInt32BE=function(t,n,i){return t=+t,n=n>>>0,i||V(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};d.prototype.writeBigInt64LE=ke(function(t,n=0){return jr(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});d.prototype.writeBigInt64BE=ke(function(t,n=0){return Hr(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $r(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Zr(e,t,n,i,r){return t=+t,n=n>>>0,r||$r(e,t,n,4,34028234663852886e22,-34028234663852886e22),ut.write(e,t,n,i,23,4),n+4}d.prototype.writeFloatLE=function(t,n,i){return Zr(this,t,n,!0,i)};d.prototype.writeFloatBE=function(t,n,i){return Zr(this,t,n,!1,i)};function Wr(e,t,n,i,r){return t=+t,n=n>>>0,r||$r(e,t,n,8,17976931348623157e292,-17976931348623157e292),ut.write(e,t,n,i,52,8),n+8}d.prototype.writeDoubleLE=function(t,n,i){return Wr(this,t,n,!0,i)};d.prototype.writeDoubleBE=function(t,n,i){return Wr(this,t,n,!1,i)};d.prototype.copy=function(t,n,i,r){if(!d.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!r&&r!==0&&(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);let a=r-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),n),a};d.prototype.fill=function(t,n,i,r){if(typeof t=="string"){if(typeof n=="string"?(r=n,n=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(t.length===1){let o=t.charCodeAt(0);(r==="utf8"&&o<128||r==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let a;if(typeof t=="number")for(a=n;a<i;++a)this[a]=t;else{let o=d.isBuffer(t)?t:d.from(t,r),s=o.length;if(s===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<i-n;++a)this[a+n]=o[a%s]}return this};var ft={};function fi(e,t,n){ft[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}fi("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);fi("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);fi("ERR_OUT_OF_RANGE",function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=Br(String(n)):typeof n=="bigint"&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=Br(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i},RangeError);function Br(e){let t="",n=e.length,i=e[0]==="-"?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function Xl(e,t,n){ht(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&Dt(t,e.length-(n+1))}function Yr(e,t,n,i,r,a){if(e>n||e<t){let o=typeof t=="bigint"?"n":"",s;throw a>3?t===0||t===BigInt(0)?s=`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:s=`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:s=`>= ${t}${o} and <= ${n}${o}`,new ft.ERR_OUT_OF_RANGE("value",s,e)}Xl(i,r,a)}function ht(e,t){if(typeof e!="number")throw new ft.ERR_INVALID_ARG_TYPE(t,"number",e)}function Dt(e,t,n){throw Math.floor(e)!==e?(ht(e,n),new ft.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var Vl=/[^+/0-9A-Za-z-_]/g;function Jl(e){if(e=e.split("=")[0],e=e.trim().replace(Vl,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function oi(e,t){t=t||1/0;let n,i=e.length,r=null,a=[];for(let o=0;o<i;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return a}function Ql(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function ef(e,t){let n,i,r,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,a.push(r),a.push(i);return a}function Gr(e){return ii.toByteArray(Jl(e))}function cn(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function fe(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function ui(e){return e!==e}var tf=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let i=n*16;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function ke(e){return typeof BigInt>"u"?nf:e}function nf(){throw new Error("BigInt not supported")}});var Qr=C((np,Jr)=>{_();var j=Jr.exports={},ue,he;function hi(){throw new Error("setTimeout has not been defined")}function ci(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ue=setTimeout:ue=hi}catch{ue=hi}try{typeof clearTimeout=="function"?he=clearTimeout:he=ci}catch{he=ci}})();function Kr(e){if(ue===setTimeout)return setTimeout(e,0);if((ue===hi||!ue)&&setTimeout)return ue=setTimeout,setTimeout(e,0);try{return ue(e,0)}catch{try{return ue.call(null,e,0)}catch{return ue.call(this,e,0)}}}function rf(e){if(he===clearTimeout)return clearTimeout(e);if((he===ci||!he)&&clearTimeout)return he=clearTimeout,clearTimeout(e);try{return he(e)}catch{try{return he.call(null,e)}catch{return he.call(this,e)}}}var Ee=[],dt=!1,We,dn=-1;function af(){!dt||!We||(dt=!1,We.length?Ee=We.concat(Ee):dn=-1,Ee.length&&Xr())}function Xr(){if(!dt){var e=Kr(af);dt=!0;for(var t=Ee.length;t;){for(We=Ee,Ee=[];++dn<t;)We&&We[dn].run();dn=-1,t=Ee.length}We=null,dt=!1,rf(e)}}j.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ee.push(new Vr(e,t)),Ee.length===1&&!dt&&Kr(Xr)};function Vr(e,t){this.fun=e,this.array=t}Vr.prototype.run=function(){this.fun.apply(null,this.array)};j.title="browser";j.browser=!0;j.env={};j.argv=[];j.version="";j.versions={};function me(){}j.on=me;j.addListener=me;j.once=me;j.off=me;j.removeListener=me;j.removeAllListeners=me;j.emit=me;j.prependListener=me;j.prependOnceListener=me;j.listeners=function(e){return[]};j.binding=function(e){throw new Error("process.binding is not supported")};j.cwd=function(){return"/"};j.chdir=function(e){throw new Error("process.chdir is not supported")};j.umask=function(){return 0}});var O,y,_=xl(()=>{O=Ze().Buffer,y=Qr()});var di=C((rp,ea)=>{_();ea.exports=function(){if(typeof globalThis>"u")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}});var gn=C((ap,pi)=>{"use strict";_();var pt=typeof Reflect=="object"?Reflect:null,ta=pt&&typeof pt.apply=="function"?pt.apply:function(t,n,i){return Function.prototype.apply.call(t,n,i)},pn;pt&&typeof pt.ownKeys=="function"?pn=pt.ownKeys:Object.getOwnPropertySymbols?pn=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:pn=function(t){return Object.getOwnPropertyNames(t)};function of(e){console&&console.warn&&console.warn(e)}var ia=Number.isNaN||function(t){return t!==t};function U(){U.init.call(this)}pi.exports=U;pi.exports.once=uf;U.EventEmitter=U;U.prototype._events=void 0;U.prototype._eventsCount=0;U.prototype._maxListeners=void 0;var na=10;function _n(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return na},set:function(e){if(typeof e!="number"||e<0||ia(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");na=e}});U.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};U.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ia(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function ra(e){return e._maxListeners===void 0?U.defaultMaxListeners:e._maxListeners}U.prototype.getMaxListeners=function(){return ra(this)};U.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=t==="error",a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=a[t];if(u===void 0)return!1;if(typeof u=="function")ta(u,this,n);else for(var l=u.length,f=fa(u,l),i=0;i<l;++i)ta(f[i],this,n);return!0};function aa(e,t,n,i){var r,a,o;if(_n(n),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),o===void 0)o=a[t]=n,++e._eventsCount;else if(typeof o=="function"?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=ra(e),r>0&&o.length>r&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,of(s)}return e}U.prototype.addListener=function(t,n){return aa(this,t,n,!1)};U.prototype.on=U.prototype.addListener;U.prototype.prependListener=function(t,n){return aa(this,t,n,!0)};function sf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function oa(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=sf.bind(i);return r.listener=n,i.wrapFn=r,r}U.prototype.once=function(t,n){return _n(n),this.on(t,oa(this,t,n)),this};U.prototype.prependOnceListener=function(t,n){return _n(n),this.prependListener(t,oa(this,t,n)),this};U.prototype.removeListener=function(t,n){var i,r,a,o,s;if(_n(n),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){s=i[o].listener,a=o;break}if(a<0)return this;a===0?i.shift():lf(i,a),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,s||n)}return this};U.prototype.off=U.prototype.removeListener;U.prototype.removeAllListeners=function(t){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),o;for(r=0;r<a.length;++r)o=a[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(t,n[r]);return this};function sa(e,t,n){var i=e._events;if(i===void 0)return[];var r=i[t];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?ff(r):fa(r,r.length)}U.prototype.listeners=function(t){return sa(this,t,!0)};U.prototype.rawListeners=function(t){return sa(this,t,!1)};U.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):la.call(e,t)};U.prototype.listenerCount=la;function la(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}U.prototype.eventNames=function(){return this._eventsCount>0?pn(this._events):[]};function fa(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function lf(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function ff(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function uf(e,t){return new Promise(function(n,i){function r(o){e.removeListener(t,a),i(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",r),n([].slice.call(arguments))}ua(e,t,a,{once:!0}),t!=="error"&&hf(e,r,{once:!0})})}function hf(e,t,n){typeof e.on=="function"&&ua(e,"error",t,n)}function ua(e,t,n,i){if(typeof e.on=="function")i.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function r(a){i.once&&e.removeEventListener(t,r),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var ca=C((op,ha)=>{_();var _t=1e3,gt=_t*60,wt=gt*60,Ye=wt*24,cf=Ye*7,df=Ye*365.25;ha.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return pf(e);if(n==="number"&&isFinite(e))return t.long?gf(e):_f(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function pf(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*df;case"weeks":case"week":case"w":return n*cf;case"days":case"day":case"d":return n*Ye;case"hours":case"hour":case"hrs":case"hr":case"h":return n*wt;case"minutes":case"minute":case"mins":case"min":case"m":return n*gt;case"seconds":case"second":case"secs":case"sec":case"s":return n*_t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function _f(e){var t=Math.abs(e);return t>=Ye?Math.round(e/Ye)+"d":t>=wt?Math.round(e/wt)+"h":t>=gt?Math.round(e/gt)+"m":t>=_t?Math.round(e/_t)+"s":e+"ms"}function gf(e){var t=Math.abs(e);return t>=Ye?wn(e,t,Ye,"day"):t>=wt?wn(e,t,wt,"hour"):t>=gt?wn(e,t,gt,"minute"):t>=_t?wn(e,t,_t,"second"):e+" ms"}function wn(e,t,n,i){var r=t>=n*1.5;return Math.round(e/n)+" "+i+(r?"s":"")}});var pa=C((sp,da)=>{_();function wf(e){n.debug=n,n.default=n,n.coerce=u,n.disable=a,n.enable=r,n.enabled=o,n.humanize=ca(),n.destroy=l,Object.keys(e).forEach(f=>{n[f]=e[f]}),n.names=[],n.skips=[],n.formatters={};function t(f){let h=0;for(let p=0;p<f.length;p++)h=(h<<5)-h+f.charCodeAt(p),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=t;function n(f){let h,p=null,c,w;function m(...E){if(!m.enabled)return;let b=m,v=Number(new Date),S=v-(h||v);b.diff=S,b.prev=h,b.curr=v,h=v,E[0]=n.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let g=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(M,x)=>{if(M==="%%")return"%";g++;let k=n.formatters[x];if(typeof k=="function"){let L=E[g];M=k.call(b,L),E.splice(g,1),g--}return M}),n.formatArgs.call(b,E),(b.log||n.log).apply(b,E)}return m.namespace=f,m.useColors=n.useColors(),m.color=n.selectColor(f),m.extend=i,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(c!==n.namespaces&&(c=n.namespaces,w=n.enabled(f)),w),set:E=>{p=E}}),typeof n.init=="function"&&n.init(m),m}function i(f,h){let p=n(this.namespace+(typeof h>"u"?":":h)+f);return p.log=this.log,p}function r(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let h,p=(typeof f=="string"?f:"").split(/[\s,]+/),c=p.length;for(h=0;h<c;h++)!p[h]||(f=p[h].replace(/\*/g,".*?"),f[0]==="-"?n.skips.push(new RegExp("^"+f.slice(1)+"$")):n.names.push(new RegExp("^"+f+"$")))}function a(){let f=[...n.names.map(s),...n.skips.map(s).map(h=>"-"+h)].join(",");return n.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let h,p;for(h=0,p=n.skips.length;h<p;h++)if(n.skips[h].test(f))return!1;for(h=0,p=n.names.length;h<p;h++)if(n.names[h].test(f))return!0;return!1}function s(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}da.exports=wf});var _a=C((te,yn)=>{_();te.formatArgs=bf;te.save=Ef;te.load=mf;te.useColors=yf;te.storage=vf();te.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();te.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function yf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bf(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+yn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(n++,r==="%c"&&(i=n))}),e.splice(i,0,t)}te.log=console.debug||console.log||(()=>{});function Ef(e){try{e?te.storage.setItem("debug",e):te.storage.removeItem("debug")}catch{}}function mf(){let e;try{e=te.storage.getItem("debug")}catch{}return!e&&typeof y<"u"&&"env"in y&&(e=y.env.DEBUG),e}function vf(){try{return localStorage}catch{}}yn.exports=pa()(te);var{formatters:xf}=yn.exports;xf.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var gi=C((_i,wa)=>{_();var bn=Ze(),ve=bn.Buffer;function ga(e,t){for(var n in e)t[n]=e[n]}ve.from&&ve.alloc&&ve.allocUnsafe&&ve.allocUnsafeSlow?wa.exports=bn:(ga(bn,_i),_i.Buffer=yt);function yt(e,t,n){return ve(e,t,n)}ga(ve,yt);yt.from=function(e,t,n){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ve(e,t,n)};yt.alloc=function(e,t,n){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=ve(e);return t!==void 0?typeof n=="string"?i.fill(t,n):i.fill(t):i.fill(0),i};yt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ve(e)};yt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return bn.SlowBuffer(e)}});var ya=C((lp,yi)=>{"use strict";_();var wi=65536,Rf=4294967295;function Sf(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Tf=gi().Buffer,En=window.crypto||window.msCrypto;En&&En.getRandomValues?yi.exports=Cf:yi.exports=Sf;function Cf(e,t){if(e>Rf)throw new RangeError("requested too many random bytes");var n=Tf.allocUnsafe(e);if(e>0)if(e>wi)for(var i=0;i<e;i+=wi)En.getRandomValues(n.slice(i,i+wi));else En.getRandomValues(n);return typeof t=="function"?y.nextTick(function(){t(null,n)}):n}});var bi=C((fp,ba)=>{_();ba.exports=gn().EventEmitter});var Ei=C(()=>{_()});var xa=C((cp,va)=>{"use strict";_();function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Af(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ea(Object(n),!0).forEach(function(i){kf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function kf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function If(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ma(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Of(e,t,n){return t&&ma(e.prototype,t),n&&ma(e,n),e}var Lf=Ze(),mn=Lf.Buffer,Df=Ei(),mi=Df.inspect,Nf=mi&&mi.custom||"inspect";function Ff(e,t,n){mn.prototype.copy.call(e,t,n)}va.exports=function(){function e(){If(this,e),this.head=null,this.tail=null,this.length=0}return Of(e,[{key:"push",value:function(n){var i={data:n,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(n){var i={data:n,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var i=this.head,r=""+i.data;i=i.next;)r+=n+i.data;return r}},{key:"concat",value:function(n){if(this.length===0)return mn.alloc(0);for(var i=mn.allocUnsafe(n>>>0),r=this.head,a=0;r;)Ff(r.data,i,a),a+=r.data.length,r=r.next;return i}},{key:"consume",value:function(n,i){var r;return n<this.head.data.length?(r=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):n===this.head.data.length?r=this.shift():r=i?this._getString(n):this._getBuffer(n),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var i=this.head,r=1,a=i.data;for(n-=a.length;i=i.next;){var o=i.data,s=n>o.length?o.length:n;if(s===o.length?a+=o:a+=o.slice(0,n),n-=s,n===0){s===o.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(s));break}++r}return this.length-=r,a}},{key:"_getBuffer",value:function(n){var i=mn.allocUnsafe(n),r=this.head,a=1;for(r.data.copy(i),n-=r.data.length;r=r.next;){var o=r.data,s=n>o.length?o.length:n;if(o.copy(i,i.length-n,0,s),n-=s,n===0){s===o.length?(++a,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(s));break}++a}return this.length-=a,i}},{key:Nf,value:function(n,i){return mi(this,Af({},i,{depth:0,customInspect:!1}))}}]),e}()});var xi=C((dp,Sa)=>{"use strict";_();function Bf(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return i||r?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,y.nextTick(vi,this,e)):y.nextTick(vi,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!t&&a?n._writableState?n._writableState.errorEmitted?y.nextTick(vn,n):(n._writableState.errorEmitted=!0,y.nextTick(Ra,n,a)):y.nextTick(Ra,n,a):t?(y.nextTick(vn,n),t(a)):y.nextTick(vn,n)}),this)}function Ra(e,t){vi(e,t),vn(e)}function vn(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function Mf(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function vi(e,t){e.emit("error",t)}function Uf(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}Sa.exports={destroy:Bf,undestroy:Mf,errorOrDestroy:Uf}});var Ge=C((pp,Aa)=>{"use strict";_();function Pf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ca={};function ie(e,t,n){n||(n=Error);function i(a,o,s){return typeof t=="string"?t:t(a,o,s)}var r=function(a){Pf(o,a);function o(s,u,l){return a.call(this,i(s,u,l))||this}return o}(n);r.prototype.name=n.name,r.prototype.code=e,Ca[e]=r}function Ta(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(i){return String(i)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:n===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function qf(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}function zf(e,t,n){return(n===void 0||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function jf(e,t,n){return typeof n!="number"&&(n=0),n+t.length>e.length?!1:e.indexOf(t,n)!==-1}ie("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);ie("ERR_INVALID_ARG_TYPE",function(e,t,n){var i;typeof t=="string"&&qf(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var r;if(zf(e," argument"))r="The ".concat(e," ").concat(i," ").concat(Ta(t,"type"));else{var a=jf(e,".")?"property":"argument";r='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(Ta(t,"type"))}return r+=". Received type ".concat(typeof n),r},TypeError);ie("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ie("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});ie("ERR_STREAM_PREMATURE_CLOSE","Premature close");ie("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});ie("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ie("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ie("ERR_STREAM_WRITE_AFTER_END","write after end");ie("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ie("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);ie("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Aa.exports.codes=Ca});var Ri=C((_p,ka)=>{"use strict";_();var Hf=Ge().codes.ERR_INVALID_OPT_VALUE;function $f(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function Zf(e,t,n,i){var r=$f(t,i,n);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var a=i?n:"highWaterMark";throw new Hf(a,r)}return Math.floor(r)}return e.objectMode?16:16*1024}ka.exports={getHighWaterMark:Zf}});var bt=C((gp,Si)=>{_();typeof Object.create=="function"?Si.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Si.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}});var Oa=C((wp,Ia)=>{_();Ia.exports=Wf;function Wf(e,t){if(Ti("noDeprecation"))return e;var n=!1;function i(){if(!n){if(Ti("throwDeprecation"))throw new Error(t);Ti("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}return i}function Ti(e){try{if(!window.localStorage)return!1}catch{return!1}var t=window.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}});var ki=C((yp,Ma)=>{"use strict";_();Ma.exports=z;function Da(e){var t=this;this.next=null,this.entry=null,this.finish=function(){bu(t,e)}}var Et;z.WritableState=Ft;var Yf={deprecate:Oa()},Na=bi(),Rn=Ze().Buffer,Gf=window.Uint8Array||function(){};function Kf(e){return Rn.from(e)}function Xf(e){return Rn.isBuffer(e)||e instanceof Gf}var Ai=xi(),Vf=Ri(),Jf=Vf.getHighWaterMark,Ie=Ge().codes,Qf=Ie.ERR_INVALID_ARG_TYPE,eu=Ie.ERR_METHOD_NOT_IMPLEMENTED,tu=Ie.ERR_MULTIPLE_CALLBACK,nu=Ie.ERR_STREAM_CANNOT_PIPE,iu=Ie.ERR_STREAM_DESTROYED,ru=Ie.ERR_STREAM_NULL_VALUES,au=Ie.ERR_STREAM_WRITE_AFTER_END,ou=Ie.ERR_UNKNOWN_ENCODING,mt=Ai.errorOrDestroy;bt()(z,Na);function su(){}function Ft(e,t,n){Et=Et||Ke(),e=e||{},typeof n!="boolean"&&(n=t instanceof Et),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=Jf(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(r){pu(t,r)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Da(this)}Ft.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n};(function(){try{Object.defineProperty(Ft.prototype,"buffer",{get:Yf.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var xn;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(xn=Function.prototype[Symbol.hasInstance],Object.defineProperty(z,Symbol.hasInstance,{value:function(t){return xn.call(this,t)?!0:this!==z?!1:t&&t._writableState instanceof Ft}})):xn=function(t){return t instanceof this};function z(e){Et=Et||Ke();var t=this instanceof Et;if(!t&&!xn.call(z,this))return new z(e);this._writableState=new Ft(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Na.call(this)}z.prototype.pipe=function(){mt(this,new nu)};function lu(e,t){var n=new au;mt(e,n),y.nextTick(t,n)}function fu(e,t,n,i){var r;return n===null?r=new ru:typeof n!="string"&&!t.objectMode&&(r=new Qf("chunk",["string","Buffer"],n)),r?(mt(e,r),y.nextTick(i,r),!1):!0}z.prototype.write=function(e,t,n){var i=this._writableState,r=!1,a=!i.objectMode&&Xf(e);return a&&!Rn.isBuffer(e)&&(e=Kf(e)),typeof t=="function"&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),typeof n!="function"&&(n=su),i.ending?lu(this,n):(a||fu(this,i,e,n))&&(i.pendingcb++,r=hu(this,i,a,e,t,n)),r};z.prototype.cork=function(){this._writableState.corked++};z.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&Fa(this,e))};z.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new ou(t);return this._writableState.defaultEncoding=t,this};Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function uu(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Rn.from(t,n)),t}Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function hu(e,t,n,i,r,a){if(!n){var o=uu(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Ci(e,t,!1,s,i,r,a);return u}function Ci(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new iu("write")):n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function cu(e,t,n,i,r){--t.pendingcb,n?(y.nextTick(r,i),y.nextTick(Nt,e,t),e._writableState.errorEmitted=!0,mt(e,i)):(r(i),e._writableState.errorEmitted=!0,mt(e,i),Nt(e,t))}function du(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function pu(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(typeof r!="function")throw new tu;if(du(n),t)cu(e,n,i,t,r);else{var a=Ba(n)||e.destroyed;!a&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&Fa(e,n),i?y.nextTick(La,e,n,a,r):La(e,n,a,r)}}function La(e,t,n,i){n||_u(e,t),t.pendingcb--,i(),Nt(e,t)}function _u(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Fa(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var o=0,s=!0;n;)r[o]=n,n.isBuf||(s=!1),n=n.next,o+=1;r.allBuffers=s,Ci(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new Da(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,f=n.callback,h=t.objectMode?1:u.length;if(Ci(e,t,!1,h,u,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}n===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}z.prototype._write=function(e,t,n){n(new eu("_write()"))};z.prototype._writev=null;z.prototype.end=function(e,t,n){var i=this._writableState;return typeof e=="function"?(n=e,e=null,t=null):typeof t=="function"&&(n=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||yu(this,i,n),this};Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ba(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function gu(e,t){e._final(function(n){t.pendingcb--,n&&mt(e,n),t.prefinished=!0,e.emit("prefinish"),Nt(e,t)})}function wu(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,y.nextTick(gu,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Nt(e,t){var n=Ba(t);if(n&&(wu(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}function yu(e,t,n){t.ending=!0,Nt(e,t),n&&(t.finished?y.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function bu(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){!this._writableState||(this._writableState.destroyed=t)}});z.prototype.destroy=Ai.destroy;z.prototype._undestroy=Ai.undestroy;z.prototype._destroy=function(e,t){t(e)}});var Ke=C((bp,Pa)=>{"use strict";_();var Eu=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};Pa.exports=ce;var Ua=Li(),Oi=ki();bt()(ce,Ua);for(Ii=Eu(Oi.prototype),Sn=0;Sn<Ii.length;Sn++)Tn=Ii[Sn],ce.prototype[Tn]||(ce.prototype[Tn]=Oi.prototype[Tn]);var Ii,Tn,Sn;function ce(e){if(!(this instanceof ce))return new ce(e);Ua.call(this,e),Oi.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",mu)))}Object.defineProperty(ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function mu(){this._writableState.ended||y.nextTick(vu,this)}function vu(e){e.end()}Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})});var Fi=C(za=>{"use strict";_();var Ni=gi().Buffer,qa=Ni.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function xu(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Ru(e){var t=xu(e);if(typeof t!="string"&&(Ni.isEncoding===qa||!qa(e)))throw new Error("Unknown encoding: "+e);return t||e}za.StringDecoder=Bt;function Bt(e){this.encoding=Ru(e);var t;switch(this.encoding){case"utf16le":this.text=Iu,this.end=Ou,t=4;break;case"utf8":this.fillLast=Cu,t=4;break;case"base64":this.text=Lu,this.end=Du,t=3;break;default:this.write=Nu,this.end=Fu;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ni.allocUnsafe(t)}Bt.prototype.write=function(e){if(e.length===0)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""};Bt.prototype.end=ku;Bt.prototype.text=Au;Bt.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Di(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Su(e,t,n){var i=t.length-1;if(i<n)return 0;var r=Di(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||r===-2?0:(r=Di(t[i]),r>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||r===-2?0:(r=Di(t[i]),r>=0?(r>0&&(r===2?r=0:e.lastNeed=r-3),r):0))}function Tu(e,t,n){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Cu(e){var t=this.lastTotal-this.lastNeed,n=Tu(this,e,t);if(n!==void 0)return n;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Au(e,t){var n=Su(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function ku(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function Iu(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Ou(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function Lu(e,t){var n=(e.length-t)%3;return n===0?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function Du(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Nu(e){return e.toString(this.encoding)}function Fu(e){return e&&e.length?this.write(e):""}});var Cn=C((mp,$a)=>{"use strict";_();var ja=Ge().codes.ERR_STREAM_PREMATURE_CLOSE;function Bu(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}function Mu(){}function Uu(e){return e.setHeader&&typeof e.abort=="function"}function Ha(e,t,n){if(typeof t=="function")return Ha(e,null,t);t||(t={}),n=Bu(n||Mu);var i=t.readable||t.readable!==!1&&e.readable,r=t.writable||t.writable!==!1&&e.writable,a=function(){e.writable||s()},o=e._writableState&&e._writableState.finished,s=function(){r=!1,o=!0,i||n.call(e)},u=e._readableState&&e._readableState.endEmitted,l=function(){i=!1,u=!0,r||n.call(e)},f=function(w){n.call(e,w)},h=function(){var w;if(i&&!u)return(!e._readableState||!e._readableState.ended)&&(w=new ja),n.call(e,w);if(r&&!o)return(!e._writableState||!e._writableState.ended)&&(w=new ja),n.call(e,w)},p=function(){e.req.on("finish",s)};return Uu(e)?(e.on("complete",s),e.on("abort",h),e.req?p():e.on("request",p)):r&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",l),e.on("finish",s),t.error!==!1&&e.on("error",f),e.on("close",h),function(){e.removeListener("complete",s),e.removeListener("abort",h),e.removeListener("request",p),e.req&&e.req.removeListener("finish",s),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",s),e.removeListener("end",l),e.removeListener("error",f),e.removeListener("close",h)}}$a.exports=Ha});var Wa=C((vp,Za)=>{"use strict";_();var An;function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pu=Cn(),Le=Symbol("lastResolve"),Xe=Symbol("lastReject"),Mt=Symbol("error"),kn=Symbol("ended"),Ve=Symbol("lastPromise"),Bi=Symbol("handlePromise"),Je=Symbol("stream");function De(e,t){return{value:e,done:t}}function qu(e){var t=e[Le];if(t!==null){var n=e[Je].read();n!==null&&(e[Ve]=null,e[Le]=null,e[Xe]=null,t(De(n,!1)))}}function zu(e){y.nextTick(qu,e)}function ju(e,t){return function(n,i){e.then(function(){if(t[kn]){n(De(void 0,!0));return}t[Bi](n,i)},i)}}var Hu=Object.getPrototypeOf(function(){}),$u=Object.setPrototypeOf((An={get stream(){return this[Je]},next:function(){var t=this,n=this[Mt];if(n!==null)return Promise.reject(n);if(this[kn])return Promise.resolve(De(void 0,!0));if(this[Je].destroyed)return new Promise(function(o,s){y.nextTick(function(){t[Mt]?s(t[Mt]):o(De(void 0,!0))})});var i=this[Ve],r;if(i)r=new Promise(ju(i,this));else{var a=this[Je].read();if(a!==null)return Promise.resolve(De(a,!1));r=new Promise(this[Bi])}return this[Ve]=r,r}},Oe(An,Symbol.asyncIterator,function(){return this}),Oe(An,"return",function(){var t=this;return new Promise(function(n,i){t[Je].destroy(null,function(r){if(r){i(r);return}n(De(void 0,!0))})})}),An),Hu),Zu=function(t){var n,i=Object.create($u,(n={},Oe(n,Je,{value:t,writable:!0}),Oe(n,Le,{value:null,writable:!0}),Oe(n,Xe,{value:null,writable:!0}),Oe(n,Mt,{value:null,writable:!0}),Oe(n,kn,{value:t._readableState.endEmitted,writable:!0}),Oe(n,Bi,{value:function(a,o){var s=i[Je].read();s?(i[Ve]=null,i[Le]=null,i[Xe]=null,a(De(s,!1))):(i[Le]=a,i[Xe]=o)},writable:!0}),n));return i[Ve]=null,Pu(t,function(r){if(r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=i[Xe];a!==null&&(i[Ve]=null,i[Le]=null,i[Xe]=null,a(r)),i[Mt]=r;return}var o=i[Le];o!==null&&(i[Ve]=null,i[Le]=null,i[Xe]=null,o(De(void 0,!0))),i[kn]=!0}),t.on("readable",zu.bind(null,i)),i};Za.exports=Zu});var Ga=C((xp,Ya)=>{_();Ya.exports=function(){throw new Error("Readable.from is not available in the browser")}});var Li=C((Sp,ro)=>{"use strict";_();ro.exports=F;var vt;F.ReadableState=Ja;var Rp=gn().EventEmitter,Va=function(t,n){return t.listeners(n).length},Pt=bi(),In=Ze().Buffer,Wu=window.Uint8Array||function(){};function Yu(e){return In.from(e)}function Gu(e){return In.isBuffer(e)||e instanceof Wu}var Mi=Ei(),I;Mi&&Mi.debuglog?I=Mi.debuglog("stream"):I=function(){};var Ku=xa(),$i=xi(),Xu=Ri(),Vu=Xu.getHighWaterMark,On=Ge().codes,Ju=On.ERR_INVALID_ARG_TYPE,Qu=On.ERR_STREAM_PUSH_AFTER_EOF,eh=On.ERR_METHOD_NOT_IMPLEMENTED,th=On.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,xt,Ui,Pi;bt()(F,Pt);var Ut=$i.errorOrDestroy,qi=["error","close","destroy","pause","resume"];function nh(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}function Ja(e,t,n){vt=vt||Ke(),e=e||{},typeof n!="boolean"&&(n=t instanceof vt),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=Vu(this,e,"readableHighWaterMark",n),this.buffer=new Ku,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(xt||(xt=Fi().StringDecoder),this.decoder=new xt(e.encoding),this.encoding=e.encoding)}function F(e){if(vt=vt||Ke(),!(this instanceof F))return new F(e);var t=this instanceof vt;this._readableState=new Ja(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Pt.call(this)}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){!this._readableState||(this._readableState.destroyed=t)}});F.prototype.destroy=$i.destroy;F.prototype._undestroy=$i.undestroy;F.prototype._destroy=function(e,t){t(e)};F.prototype.push=function(e,t){var n=this._readableState,i;return n.objectMode?i=!0:typeof e=="string"&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=In.from(e,t),t=""),i=!0),Qa(this,e,t,!1,i)};F.prototype.unshift=function(e){return Qa(this,e,null,!0,!1)};function Qa(e,t,n,i,r){I("readableAddChunk",t);var a=e._readableState;if(t===null)a.reading=!1,ah(e,a);else{var o;if(r||(o=ih(a,t)),o)Ut(e,o);else if(a.objectMode||t&&t.length>0)if(typeof t!="string"&&!a.objectMode&&Object.getPrototypeOf(t)!==In.prototype&&(t=Yu(t)),i)a.endEmitted?Ut(e,new th):zi(e,a,t,!0);else if(a.ended)Ut(e,new Qu);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||t.length!==0?zi(e,a,t,!1):Hi(e,a)):zi(e,a,t,!1)}else i||(a.reading=!1,Hi(e,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function zi(e,t,n,i){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&Ln(e)),Hi(e,t)}function ih(e,t){var n;return!Gu(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(n=new Ju("chunk",["string","Buffer","Uint8Array"],t)),n}F.prototype.isPaused=function(){return this._readableState.flowing===!1};F.prototype.setEncoding=function(e){xt||(xt=Fi().StringDecoder);var t=new xt(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";n!==null;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var Ka=1073741824;function rh(e){return e>=Ka?e=Ka:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Xa(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=rh(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}F.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return I("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?ji(this):Ln(this),null;if(e=Xa(e,t),e===0&&t.ended)return t.length===0&&ji(this),null;var i=t.needReadable;I("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,I("length less than watermark",i)),t.ended||t.reading?(i=!1,I("reading or ended",i)):i&&(I("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Xa(n,t)));var r;return e>0?r=no(e,t):r=null,r===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&ji(this)),r!==null&&this.emit("data",r),r};function ah(e,t){if(I("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?Ln(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,eo(e)))}}function Ln(e){var t=e._readableState;I("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,y.nextTick(eo,e))}function eo(e){var t=e._readableState;I("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Zi(e)}function Hi(e,t){t.readingMore||(t.readingMore=!0,y.nextTick(oh,e,t))}function oh(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var n=t.length;if(I("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}F.prototype._read=function(e){Ut(this,new eh("_read()"))};F.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,I("pipe count=%d opts=%j",i.pipesCount,t);var r=(!t||t.end!==!1)&&e!==y.stdout&&e!==y.stderr,a=r?s:m;i.endEmitted?y.nextTick(a):n.once("end",a),e.on("unpipe",o);function o(E,b){I("onunpipe"),E===n&&b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,f())}function s(){I("onend"),e.end()}var u=sh(n);e.on("drain",u);var l=!1;function f(){I("cleanup"),e.removeListener("close",c),e.removeListener("finish",w),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",h),l=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u()}n.on("data",h);function h(E){I("ondata");var b=e.write(E);I("dest.write",b),b===!1&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&io(i.pipes,e)!==-1)&&!l&&(I("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(E){I("onerror",E),m(),e.removeListener("error",p),Va(e,"error")===0&&Ut(e,E)}nh(e,"error",p);function c(){e.removeListener("finish",w),m()}e.once("close",c);function w(){I("onfinish"),e.removeListener("close",c),m()}e.once("finish",w);function m(){I("unpipe"),n.unpipe(e)}return e.emit("pipe",n),i.flowing||(I("pipe resume"),n.resume()),e};function sh(e){return function(){var n=e._readableState;I("pipeOnDrain",n.awaitDrain),n.awaitDrain&&n.awaitDrain--,n.awaitDrain===0&&Va(e,"data")&&(n.flowing=!0,Zi(e))}}F.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=io(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)};F.prototype.on=function(e,t){var n=Pt.prototype.on.call(this,e,t),i=this._readableState;return e==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):e==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,I("on readable",i.length,i.reading),i.length?Ln(this):i.reading||y.nextTick(lh,this)),n};F.prototype.addListener=F.prototype.on;F.prototype.removeListener=function(e,t){var n=Pt.prototype.removeListener.call(this,e,t);return e==="readable"&&y.nextTick(to,this),n};F.prototype.removeAllListeners=function(e){var t=Pt.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&y.nextTick(to,this),t};function to(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function lh(e){I("readable nexttick read 0"),e.read(0)}F.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!e.readableListening,fh(this,e)),e.paused=!1,this};function fh(e,t){t.resumeScheduled||(t.resumeScheduled=!0,y.nextTick(uh,e,t))}function uh(e,t){I("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Zi(e),t.flowing&&!t.reading&&e.read(0)}F.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Zi(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&e.read()!==null;);}F.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;e.on("end",function(){if(I("wrapped end"),n.decoder&&!n.ended){var o=n.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(I("wrapped data"),n.decoder&&(o=n.decoder.write(o)),!(n.objectMode&&o==null)&&!(!n.objectMode&&(!o||!o.length))){var s=t.push(o);s||(i=!0,e.pause())}});for(var r in e)this[r]===void 0&&typeof e[r]=="function"&&(this[r]=function(s){return function(){return e[s].apply(e,arguments)}}(r));for(var a=0;a<qi.length;a++)e.on(qi[a],this.emit.bind(this,qi[a]));return this._read=function(o){I("wrapped _read",o),i&&(i=!1,e.resume())},this};typeof Symbol=="function"&&(F.prototype[Symbol.asyncIterator]=function(){return Ui===void 0&&(Ui=Wa()),Ui(this)});Object.defineProperty(F.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(F.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(F.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}});F._fromList=no;Object.defineProperty(F.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function no(e,t){if(t.length===0)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(t.decoder?n=t.buffer.join(""):t.buffer.length===1?n=t.buffer.first():n=t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function ji(e){var t=e._readableState;I("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,y.nextTick(hh,t,e))}function hh(e,t){if(I("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}typeof Symbol=="function"&&(F.from=function(e,t){return Pi===void 0&&(Pi=Ga()),Pi(F,e,t)});function io(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}});var Wi=C((Tp,oo)=>{"use strict";_();oo.exports=xe;var Dn=Ge().codes,ch=Dn.ERR_METHOD_NOT_IMPLEMENTED,dh=Dn.ERR_MULTIPLE_CALLBACK,ph=Dn.ERR_TRANSFORM_ALREADY_TRANSFORMING,_h=Dn.ERR_TRANSFORM_WITH_LENGTH_0,Nn=Ke();bt()(xe,Nn);function gh(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(i===null)return this.emit("error",new dh);n.writechunk=null,n.writecb=null,t!=null&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function xe(e){if(!(this instanceof xe))return new xe(e);Nn.call(this,e),this._transformState={afterTransform:gh.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",wh)}function wh(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,n){ao(e,t,n)}):ao(this,null,null)}xe.prototype.push=function(e,t){return this._transformState.needTransform=!1,Nn.prototype.push.call(this,e,t)};xe.prototype._transform=function(e,t,n){n(new ch("_transform()"))};xe.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};xe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};xe.prototype._destroy=function(e,t){Nn.prototype._destroy.call(this,e,function(n){t(n)})};function ao(e,t,n){if(t)return e.emit("error",t);if(n!=null&&e.push(n),e._writableState.length)throw new _h;if(e._transformState.transforming)throw new ph;return e.push(null)}});var fo=C((Cp,lo)=>{"use strict";_();lo.exports=qt;var so=Wi();bt()(qt,so);function qt(e){if(!(this instanceof qt))return new qt(e);so.call(this,e)}qt.prototype._transform=function(e,t,n){n(null,e)}});var _o=C((Ap,po)=>{"use strict";_();var Yi;function yh(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var co=Ge().codes,bh=co.ERR_MISSING_ARGS,Eh=co.ERR_STREAM_DESTROYED;function uo(e){if(e)throw e}function mh(e){return e.setHeader&&typeof e.abort=="function"}function vh(e,t,n,i){i=yh(i);var r=!1;e.on("close",function(){r=!0}),Yi===void 0&&(Yi=Cn()),Yi(e,{readable:t,writable:n},function(o){if(o)return i(o);r=!0,i()});var a=!1;return function(o){if(!r&&!a){if(a=!0,mh(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();i(o||new Eh("pipe"))}}}function ho(e){e()}function xh(e,t){return e.pipe(t)}function Rh(e){return!e.length||typeof e[e.length-1]!="function"?uo:e.pop()}function Sh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Rh(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new bh("streams");var r,a=t.map(function(o,s){var u=s<t.length-1,l=s>0;return vh(o,u,l,function(f){r||(r=f),f&&a.forEach(ho),!u&&(a.forEach(ho),i(r))})});return t.reduce(xh)}po.exports=Sh});var wo=C((re,go)=>{_();re=go.exports=Li();re.Stream=re;re.Readable=re;re.Writable=ki();re.Duplex=Ke();re.Transform=Wi();re.PassThrough=fo();re.finished=Cn();re.pipeline=_o()});var Eo=C((kp,bo)=>{_();var yo;bo.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(window):e=>(yo||(yo=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var xo=C((Ip,vo)=>{"use strict";_();function mo(e,t){for(let n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}function Th(e,t,n){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");n||(n={}),typeof t=="object"&&(n=t,t=""),t&&(n.code=t);try{return mo(e,n)}catch{n.message=e.message,n.stack=e.stack;let r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(e)),mo(new r,n)}}vo.exports=Th});var Ao=C((Op,Co)=>{_();var Ch=_a()("simple-peer"),To=di(),Ro=ya(),Ah=wo(),Gi=Eo(),D=xo(),{Buffer:kh}=Ze(),Ki=64*1024,Ih=5*1e3,Oh=5*1e3;function So(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function Lh(e){console.warn(e)}var Re=class extends Ah.Duplex{constructor(t){if(t=Object.assign({allowHalfOpen:!1},t),super(t),this._id=Ro(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||Ro(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||Re.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Re.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(n=>n),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=t.trickle!==void 0?t.trickle:!0,this.allowHalfTrickle=t.allowHalfTrickle!==void 0?t.allowHalfTrickle:!1,this.iceCompleteTimeout=t.iceCompleteTimeout||Ih,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&typeof t.wrtc=="object"?t.wrtc:To(),!this._wrtc)throw D(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(n){this.destroy(D(n,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=n=>{this._onIceCandidate(n)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(n=>{this.destroy(D(n,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=n=>{this._setupData(n)},this.streams&&this.streams.forEach(n=>{this.addStream(n)}),this._pc.ontrack=n=>{this._onTrack(n)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw D(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(n=>{this._addIceCandidate(n)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(n=>{this.destroy(D(n,"ERR_SET_REMOTE_DESCRIPTION"))}),!t.sdp&&!t.candidate&&!t.renegotiate&&!t.transceiverRequest&&this.destroy(D(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){let n=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(n).catch(i=>{!n.address||n.address.endsWith(".local")?Lh("Ignoring unsupported ICE candidate."):this.destroy(D(i,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this.destroying){if(this.destroyed)throw D(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,n){if(!this.destroying){if(this.destroyed)throw D(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,n),this._needsNegotiation()}catch(i){this.destroy(D(i,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:n}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw D(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach(n=>{this.addTrack(n,t)})}}addTrack(t,n){if(this.destroying)return;if(this.destroyed)throw D(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");let i=this._senderMap.get(t)||new Map,r=i.get(n);if(!r)r=this._pc.addTrack(t,n),i.set(n,r),this._senderMap.set(t,i),this._needsNegotiation();else throw r.removed?D(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):D(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(t,n,i){if(this.destroying)return;if(this.destroyed)throw D(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");let r=this._senderMap.get(t),a=r?r.get(i):null;if(!a)throw D(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");n&&this._senderMap.set(n,r),a.replaceTrack!=null?a.replaceTrack(n):this.destroy(D(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(t,n){if(this.destroying)return;if(this.destroyed)throw D(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");let i=this._senderMap.get(t),r=i?i.get(n):null;if(!r)throw D(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(a){a.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(r):this.destroy(D(a,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw D(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach(n=>{this.removeTrack(n,t)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Gi(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw D(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,()=>{})}_destroy(t,n){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),Gi(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),n()}))}_setupData(t){if(!t.channel)return this.destroy(D(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Ki),this.channelName=this._channel.label,this._channel.onmessage=i=>{this._onChannelMessage(i)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=i=>{let r=i.error instanceof Error?i.error:new Error(`Datachannel error: ${i.message} ${i.filename}:${i.lineno}:${i.colno}`);this.destroy(D(r,"ERR_DATA_CHANNEL"))};let n=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(n&&this._onChannelClose(),n=!0):n=!1},Oh)}_read(){}_write(t,n,i){if(this.destroyed)return i(D(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(r){return this.destroy(D(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Ki?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=t,this._cb=i}_onFinish(){if(this.destroyed)return;let t=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=So(t.sdp)),t.sdp=this.sdpTransform(t.sdp);let n=()=>{if(this.destroyed)return;let a=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:a.type,sdp:a.sdp})},i=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?n():this.once("_iceComplete",n))},r=a=>{this.destroy(D(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(i).catch(r)}).catch(t=>{this.destroy(D(t,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(t=>{!t.mid&&t.sender.track&&!t.requested&&(t.requested=!0,this.addTransceiver(t.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=So(t.sdp)),t.sdp=this.sdpTransform(t.sdp);let n=()=>{if(this.destroyed)return;let a=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:a.type,sdp:a.sdp}),this.initiator||this._requestMissingTransceivers()},i=()=>{this.destroyed||(this.trickle||this._iceComplete?n():this.once("_iceComplete",n))},r=a=>{this.destroy(D(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(i).catch(r)}).catch(t=>{this.destroy(D(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(D(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;let t=this._pc.iceConnectionState,n=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),this.emit("iceStateChange",t,n),(t==="connected"||t==="completed")&&(this._pcReady=!0,this._maybeReady()),t==="failed"&&this.destroy(D(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),t==="closed"&&this.destroy(D(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){let n=i=>(Object.prototype.toString.call(i.values)==="[object Array]"&&i.values.forEach(r=>{Object.assign(i,r)}),i);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{let r=[];i.forEach(a=>{r.push(n(a))}),t(null,r)},i=>t(i)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(this.destroyed)return;let r=[];i.result().forEach(a=>{let o={};a.names().forEach(s=>{o[s]=a.stat(s)}),o.id=a.id,o.type=a.type,o.timestamp=a.timestamp,r.push(n(o))}),t(null,r)},i=>t(i)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let t=()=>{this.destroyed||this.getStats((n,i)=>{if(this.destroyed)return;n&&(i=[]);let r={},a={},o={},s=!1;i.forEach(l=>{(l.type==="remotecandidate"||l.type==="remote-candidate")&&(r[l.id]=l),(l.type==="localcandidate"||l.type==="local-candidate")&&(a[l.id]=l),(l.type==="candidatepair"||l.type==="candidate-pair")&&(o[l.id]=l)});let u=l=>{s=!0;let f=a[l.localCandidateId];f&&(f.ip||f.address)?(this.localAddress=f.ip||f.address,this.localPort=Number(f.port)):f&&f.ipAddress?(this.localAddress=f.ipAddress,this.localPort=Number(f.portNumber)):typeof l.googLocalAddress=="string"&&(f=l.googLocalAddress.split(":"),this.localAddress=f[0],this.localPort=Number(f[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let h=r[l.remoteCandidateId];h&&(h.ip||h.address)?(this.remoteAddress=h.ip||h.address,this.remotePort=Number(h.port)):h&&h.ipAddress?(this.remoteAddress=h.ipAddress,this.remotePort=Number(h.portNumber)):typeof l.googRemoteAddress=="string"&&(h=l.googRemoteAddress.split(":"),this.remoteAddress=h[0],this.remotePort=Number(h[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(l=>{l.type==="transport"&&l.selectedCandidatePairId&&u(o[l.selectedCandidatePairId]),(l.type==="googCandidatePair"&&l.googActiveConnection==="true"||(l.type==="candidatepair"||l.type==="candidate-pair")&&l.selected)&&u(l)}),!s&&(!Object.keys(o).length||Object.keys(a).length)){setTimeout(t,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(f){return this.destroy(D(f,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');let l=this._cb;this._cb=null,l(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Ki||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let n=t.data;n instanceof ArrayBuffer&&(n=kh.from(n)),this.push(n)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);let t=this._cb;this._cb=null,t(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach(n=>{this._debug("on track"),this.emit("track",t.track,n),this._remoteTracks.push({track:t.track,stream:n}),!this._remoteStreams.some(i=>i.id===n.id)&&(this._remoteStreams.push(n),Gi(()=>{this._debug("on stream"),this.emit("stream",n)}))})}_debug(){let t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],Ch.apply(null,t)}};Re.WEBRTC_SUPPORT=!!To();Re.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Re.channelConfig={};Co.exports=Re});var Er=C((Xn,Gs)=>{_();(function(e,t){typeof Xn=="object"&&typeof Gs<"u"?t(Xn):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e["base64-arraybuffer"]={}))})(Xn,function(e){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=typeof Uint8Array>"u"?[]:new Uint8Array(256),i=0;i<t.length;i++)n[t.charCodeAt(i)]=i;var r=function(o){var s=new Uint8Array(o),u,l=s.length,f="";for(u=0;u<l;u+=3)f+=t[s[u]>>2],f+=t[(s[u]&3)<<4|s[u+1]>>4],f+=t[(s[u+1]&15)<<2|s[u+2]>>6],f+=t[s[u+2]&63];return l%3===2?f=f.substring(0,f.length-1)+"=":l%3===1&&(f=f.substring(0,f.length-2)+"=="),f},a=function(o){var s=o.length*.75,u=o.length,l,f=0,h,p,c,w;o[o.length-1]==="="&&(s--,o[o.length-2]==="="&&s--);var m=new ArrayBuffer(s),E=new Uint8Array(m);for(l=0;l<u;l+=4)h=n[o.charCodeAt(l)],p=n[o.charCodeAt(l+1)],c=n[o.charCodeAt(l+2)],w=n[o.charCodeAt(l+3)],E[f++]=h<<2|p>>4,E[f++]=(p&15)<<4|c>>2,E[f++]=(c&3)<<6|w&63;return m};e.decode=a,e.encode=r,Object.defineProperty(e,"__esModule",{value:!0})})});var Xs=C((Ks,Vn)=>{_();(function(e){"use strict";var t={bytesToHex:function(r){return n(r)},hexToBytes:function(r){if(r.length%2===1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return r.indexOf("0x")===0&&(r=r.slice(2)),r.match(/../g).map(function(a){return parseInt(a,16)})}};function n(r){return r.map(function(a){return i(a.toString(16),2)}).join("")}function i(r,a){return r.length>a?r:Array(a-r.length+1).join("0")+r}typeof Vn<"u"&&Vn.exports?Vn.exports=t:e.convertHex=t})(Ks)});var Vs=C((Dp,vr)=>{"use strict";_();function L0(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var mr=window.crypto||window.msCrypto;mr&&mr.getRandomValues?vr.exports=D0:vr.exports=L0;function D0(e,t){if(e>65536)throw new Error("requested too many random bytes");var n=new window.Uint8Array(e);e>0&&mr.getRandomValues(n);var i=new O(n.buffer);return typeof t=="function"?y.nextTick(function(){t(null,i)}):i}});var Js=C((Np,Jn)=>{"use strict";_();function N0(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(e[n])===-1&&t.push(e[n]);return t}function F0(e){var t=new Set;return e.filter(function(n){if(!t.has(n))return t.add(n),!0})}function B0(e){var t=[];return new Set(e).forEach(function(n){t.push(n)}),t}function M0(){var e=!1;return new Set([!0]).forEach(function(t){e=t}),e===!0}"Set"in window?typeof Set.prototype.forEach=="function"&&M0()?Jn.exports=B0:Jn.exports=F0:Jn.exports=N0});var tl=C((Qs,el)=>{_();var U0=Js();function on(){this.chars=""}on.prototype.setType=function(e){var t,n="0123456789",i="abcdefghijklmnopqrstuvwxyz",r=i.toUpperCase(),a="abcdef",o="01",s="01234567";e==="alphanumeric"?t=n+i+r:e==="numeric"?t=n:e==="alphabetic"?t=i+r:e==="hex"?t=n+a:e==="binary"?t=o:e==="octal"?t=s:t=e,this.chars=t};on.prototype.removeUnreadable=function(){var e=/[0OIl]/g;this.chars=this.chars.replace(e,"")};on.prototype.setcapitalization=function(e){e==="uppercase"?this.chars=this.chars.toUpperCase():e==="lowercase"&&(this.chars=this.chars.toLowerCase())};on.prototype.removeDuplicates=function(){var e=this.chars.split("");e=U0(e),this.chars=e.join("")};el.exports=Qs=on});var ol=C(al=>{"use strict";_();var nl=Vs(),P0=tl();function q0(e){for(;;)try{return nl(e)}catch{continue}}function il(e,t,n,i,r){for(var a=t,o=0;o<e.length&&a.length<i;o++){var s=e.readUInt8(o);s<r&&(a+=n.charAt(s%n.length))}return a}function rl(e,t,n,i,r){nl(n,function(a,o){a&&r(a);var s=il(o,e,t,n,i);s.length<n?rl(s,t,n,i,r):r(null,s)})}al.generate=function(e,t){var n=new P0,i,r,a,o="";typeof e=="object"?(i=e.length||32,e.charset?n.setType(e.charset):n.setType("alphanumeric"),e.capitalization&&n.setcapitalization(e.capitalization),e.readable&&n.removeUnreadable(),n.removeDuplicates()):typeof e=="number"?(i=e,n.setType("alphanumeric")):(i=32,n.setType("alphanumeric"));var s=n.chars.length,u=256-256%s;if(!t){for(;o.length<i;){var l=q0(Math.ceil(i*256/u));o=il(l,o,n.chars,i,u)}return o}rl(o,n.chars,i,u,t)}});var ll=C((Bp,sl)=>{_();sl.exports=ol()});var ul=C((Mp,fl)=>{_();fl.exports=function(t){if(typeof t!="object"||t===null||typeof t.byteLength!="number")throw new TypeError("Expected input to be an ArrayBuffer");for(var n=new Uint8Array(t),i="",r,a=0;a<n.length;a++)r=n[a].toString(16),i+=r.length===1?"0"+r:r;return i}});_();var pl=lt(di()),_l=lt(gn()),Rr=lt(Ao());_();function Ct(e){let t=e.length;for(;--t>=0;)e[t]=0}var Dh=0,ds=1,Nh=2,Fh=3,Bh=258,pr=29,tn=256,Yt=tn+1+pr,Tt=30,_r=19,ps=2*Yt+1,Qe=15,Xi=16,Mh=7,gr=256,_s=16,gs=17,ws=18,ur=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),qn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Uh=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ys=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ph=512,Te=new Array((Yt+2)*2);Ct(Te);var $t=new Array(Tt*2);Ct($t);var Gt=new Array(Ph);Ct(Gt);var Kt=new Array(Bh-Fh+1);Ct(Kt);var wr=new Array(pr);Ct(wr);var $n=new Array(Tt);Ct($n);function Vi(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var bs,Es,ms;function Ji(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var vs=e=>e<256?Gt[e]:Gt[256+(e>>>7)],Xt=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},J=(e,t,n)=>{e.bi_valid>Xi-n?(e.bi_buf|=t<<e.bi_valid&65535,Xt(e,e.bi_buf),e.bi_buf=t>>Xi-e.bi_valid,e.bi_valid+=n-Xi):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},pe=(e,t,n)=>{J(e,n[t*2],n[t*2+1])},xs=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},qh=e=>{e.bi_valid===16?(Xt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},zh=(e,t)=>{let n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,u=t.stat_desc.max_length,l,f,h,p,c,w,m=0;for(p=0;p<=Qe;p++)e.bl_count[p]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<ps;l++)f=e.heap[l],p=n[n[f*2+1]*2+1]+1,p>u&&(p=u,m++),n[f*2+1]=p,!(f>i)&&(e.bl_count[p]++,c=0,f>=s&&(c=o[f-s]),w=n[f*2],e.opt_len+=w*(p+c),a&&(e.static_len+=w*(r[f*2+1]+c)));if(m!==0){do{for(p=u-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[u]--,m-=2}while(m>0);for(p=u;p!==0;p--)for(f=e.bl_count[p];f!==0;)h=e.heap[--l],!(h>i)&&(n[h*2+1]!==p&&(e.opt_len+=(p-n[h*2+1])*n[h*2],n[h*2+1]=p),f--)}},Rs=(e,t,n)=>{let i=new Array(Qe+1),r=0,a,o;for(a=1;a<=Qe;a++)i[a]=r=r+n[a-1]<<1;for(o=0;o<=t;o++){let s=e[o*2+1];s!==0&&(e[o*2]=xs(i[s]++,s))}},jh=()=>{let e,t,n,i,r,a=new Array(Qe+1);for(n=0,i=0;i<pr-1;i++)for(wr[i]=n,e=0;e<1<<ur[i];e++)Kt[n++]=i;for(Kt[n-1]=i,r=0,i=0;i<16;i++)for($n[i]=r,e=0;e<1<<qn[i];e++)Gt[r++]=i;for(r>>=7;i<Tt;i++)for($n[i]=r<<7,e=0;e<1<<qn[i]-7;e++)Gt[256+r++]=i;for(t=0;t<=Qe;t++)a[t]=0;for(e=0;e<=143;)Te[e*2+1]=8,e++,a[8]++;for(;e<=255;)Te[e*2+1]=9,e++,a[9]++;for(;e<=279;)Te[e*2+1]=7,e++,a[7]++;for(;e<=287;)Te[e*2+1]=8,e++,a[8]++;for(Rs(Te,Yt+1,a),e=0;e<Tt;e++)$t[e*2+1]=5,$t[e*2]=xs(e,5);bs=new Vi(Te,ur,tn+1,Yt,Qe),Es=new Vi($t,qn,0,Tt,Qe),ms=new Vi(new Array(0),Uh,0,_r,Mh)},Ss=e=>{let t;for(t=0;t<Yt;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Tt;t++)e.dyn_dtree[t*2]=0;for(t=0;t<_r;t++)e.bl_tree[t*2]=0;e.dyn_ltree[gr*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Ts=e=>{e.bi_valid>8?Xt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Hh=(e,t,n,i)=>{Ts(e),i&&(Xt(e,n),Xt(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},ko=(e,t,n,i)=>{let r=t*2,a=n*2;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]},Qi=(e,t,n)=>{let i=e.heap[n],r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&ko(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!ko(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},Io=(e,t,n)=>{let i,r,a=0,o,s;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],r=e.pending_buf[e.l_buf+a],a++,i===0?pe(e,r,t):(o=Kt[r],pe(e,o+tn+1,t),s=ur[o],s!==0&&(r-=wr[o],J(e,r,s)),i--,o=vs(i),pe(e,o,n),s=qn[o],s!==0&&(i-=$n[o],J(e,i,s)));while(a<e.last_lit);pe(e,gr,t)},hr=(e,t)=>{let n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems,o,s,u=-1,l;for(e.heap_len=0,e.heap_max=ps,o=0;o<a;o++)n[o*2]!==0?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[l*2+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)Qi(e,n,o);l=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Qi(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[l*2]=n[o*2]+n[s*2],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[o*2+1]=n[s*2+1]=l,e.heap[1]=l++,Qi(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],zh(e,t),Rs(n,u,e.bl_count)},Oo=(e,t,n)=>{let i,r=-1,a,o=t[0*2+1],s=0,u=7,l=4;for(o===0&&(u=138,l=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)a=o,o=t[(i+1)*2+1],!(++s<u&&a===o)&&(s<l?e.bl_tree[a*2]+=s:a!==0?(a!==r&&e.bl_tree[a*2]++,e.bl_tree[_s*2]++):s<=10?e.bl_tree[gs*2]++:e.bl_tree[ws*2]++,s=0,r=a,o===0?(u=138,l=3):a===o?(u=6,l=3):(u=7,l=4))},Lo=(e,t,n)=>{let i,r=-1,a,o=t[0*2+1],s=0,u=7,l=4;for(o===0&&(u=138,l=3),i=0;i<=n;i++)if(a=o,o=t[(i+1)*2+1],!(++s<u&&a===o)){if(s<l)do pe(e,a,e.bl_tree);while(--s!==0);else a!==0?(a!==r&&(pe(e,a,e.bl_tree),s--),pe(e,_s,e.bl_tree),J(e,s-3,2)):s<=10?(pe(e,gs,e.bl_tree),J(e,s-3,3)):(pe(e,ws,e.bl_tree),J(e,s-11,7));s=0,r=a,o===0?(u=138,l=3):a===o?(u=6,l=3):(u=7,l=4)}},$h=e=>{let t;for(Oo(e,e.dyn_ltree,e.l_desc.max_code),Oo(e,e.dyn_dtree,e.d_desc.max_code),hr(e,e.bl_desc),t=_r-1;t>=3&&e.bl_tree[ys[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},Zh=(e,t,n,i)=>{let r;for(J(e,t-257,5),J(e,n-1,5),J(e,i-4,4),r=0;r<i;r++)J(e,e.bl_tree[ys[r]*2+1],3);Lo(e,e.dyn_ltree,t-1),Lo(e,e.dyn_dtree,n-1)},Wh=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(n=32;n<tn;n++)if(e.dyn_ltree[n*2]!==0)return 1;return 0},Do=!1,Yh=e=>{Do||(jh(),Do=!0),e.l_desc=new Ji(e.dyn_ltree,bs),e.d_desc=new Ji(e.dyn_dtree,Es),e.bl_desc=new Ji(e.bl_tree,ms),e.bi_buf=0,e.bi_valid=0,Ss(e)},Cs=(e,t,n,i)=>{J(e,(Dh<<1)+(i?1:0),3),Hh(e,t,n,!0)},Gh=e=>{J(e,ds<<1,3),pe(e,gr,Te),qh(e)},Kh=(e,t,n,i)=>{let r,a,o=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=Wh(e)),hr(e,e.l_desc),hr(e,e.d_desc),o=$h(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=n+5,n+4<=r&&t!==-1?Cs(e,t,n,i):e.strategy===4||a===r?(J(e,(ds<<1)+(i?1:0),3),Io(e,Te,$t)):(J(e,(Nh<<1)+(i?1:0),3),Zh(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Io(e,e.dyn_ltree,e.dyn_dtree)),Ss(e),i&&Ts(e)},Xh=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Kt[n]+tn+1)*2]++,e.dyn_dtree[vs(t)*2]++),e.last_lit===e.lit_bufsize-1),Vh=Yh,Jh=Cs,Qh=Kh,ec=Xh,tc=Gh,nc={_tr_init:Vh,_tr_stored_block:Jh,_tr_flush_block:Qh,_tr_tally:ec,_tr_align:tc},ic=(e,t,n,i)=>{let r=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,a=a+r|0;while(--o);r%=65521,a%=65521}return r|a<<16|0},Vt=ic,rc=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},ac=new Uint32Array(rc()),oc=(e,t,n,i)=>{let r=ac,a=i+n;e^=-1;for(let o=i;o<a;o++)e=e>>>8^r[(e^t[o])&255];return e^-1},W=oc,tt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},at={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:sc,_tr_stored_block:lc,_tr_flush_block:fc,_tr_tally:Ue,_tr_align:uc}=nc,{Z_NO_FLUSH:ot,Z_PARTIAL_FLUSH:hc,Z_FULL_FLUSH:cc,Z_FINISH:Pe,Z_BLOCK:No,Z_OK:_e,Z_STREAM_END:Fo,Z_STREAM_ERROR:ae,Z_DATA_ERROR:dc,Z_BUF_ERROR:er,Z_DEFAULT_COMPRESSION:pc,Z_FILTERED:_c,Z_HUFFMAN_ONLY:Fn,Z_RLE:gc,Z_FIXED:wc,Z_DEFAULT_STRATEGY:yc,Z_UNKNOWN:bc,Z_DEFLATED:Yn}=at,Ec=9,mc=15,vc=8,xc=29,Rc=256,cr=Rc+1+xc,Sc=30,Tc=19,Cc=2*cr+1,Ac=15,N=3,Be=258,se=Be+N+1,kc=32,Gn=42,dr=69,zn=73,jn=91,Hn=103,et=113,jt=666,$=1,nn=2,nt=3,At=4,Ic=3,Me=(e,t)=>(e.msg=tt[t],t),Bo=e=>(e<<1)-(e>4?9:0),Fe=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Oc=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,qe=Oc,Ne=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Y=(e,t)=>{fc(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ne(e.strm)},B=(e,t)=>{e.pending_buf[e.pending++]=t},zt=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Lc=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=Vt(e.adler,t,r,n):e.state.wrap===2&&(e.adler=W(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},As=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,a,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-se?e.strstart-(e.w_size-se):0,l=e.window,f=e.w_mask,h=e.prev,p=e.strstart+Be,c=l[i+o-1],w=l[i+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,!(l[r+o]!==w||l[r+o-1]!==c||l[r]!==l[i]||l[++r]!==l[i+1])){i+=2,r++;do;while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<p);if(a=Be-(p-i),i=p-Be,a>o){if(e.match_start=t,o=a,a>=s)break;c=l[i+o-1],w=l[i+o]}}while((t=h[t&f])>u&&--n!==0);return o<=e.lookahead?o:e.lookahead},it=e=>{let t=e.w_size,n,i,r,a,o;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-se)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);a+=t}if(e.strm.avail_in===0)break;if(i=Lc(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=N)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=qe(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=qe(e,e.ins_h,e.window[o+N-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<N)););}while(e.lookahead<se&&e.strm.avail_in!==0)},Dc=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(it(e),e.lookahead===0&&t===ot)return $;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;let i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,Y(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-se&&(Y(e,!1),e.strm.avail_out===0))return $}return e.insert=0,t===Pe?(Y(e,!0),e.strm.avail_out===0?nt:At):(e.strstart>e.block_start&&(Y(e,!1),e.strm.avail_out===0),$)},tr=(e,t)=>{let n,i;for(;;){if(e.lookahead<se){if(it(e),e.lookahead<se&&t===ot)return $;if(e.lookahead===0)break}if(n=0,e.lookahead>=N&&(e.ins_h=qe(e,e.ins_h,e.window[e.strstart+N-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-se&&(e.match_length=As(e,n)),e.match_length>=N)if(i=Ue(e,e.strstart-e.match_start,e.match_length-N),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=N){e.match_length--;do e.strstart++,e.ins_h=qe(e,e.ins_h,e.window[e.strstart+N-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=qe(e,e.ins_h,e.window[e.strstart+1]);else i=Ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Y(e,!1),e.strm.avail_out===0))return $}return e.insert=e.strstart<N-1?e.strstart:N-1,t===Pe?(Y(e,!0),e.strm.avail_out===0?nt:At):e.last_lit&&(Y(e,!1),e.strm.avail_out===0)?$:nn},Rt=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<se){if(it(e),e.lookahead<se&&t===ot)return $;if(e.lookahead===0)break}if(n=0,e.lookahead>=N&&(e.ins_h=qe(e,e.ins_h,e.window[e.strstart+N-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=N-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-se&&(e.match_length=As(e,n),e.match_length<=5&&(e.strategy===_c||e.match_length===N&&e.strstart-e.match_start>4096)&&(e.match_length=N-1)),e.prev_length>=N&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-N,i=Ue(e,e.strstart-1-e.prev_match,e.prev_length-N),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=qe(e,e.ins_h,e.window[e.strstart+N-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=N-1,e.strstart++,i&&(Y(e,!1),e.strm.avail_out===0))return $}else if(e.match_available){if(i=Ue(e,0,e.window[e.strstart-1]),i&&Y(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return $}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Ue(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<N-1?e.strstart:N-1,t===Pe?(Y(e,!0),e.strm.avail_out===0?nt:At):e.last_lit&&(Y(e,!1),e.strm.avail_out===0)?$:nn},Nc=(e,t)=>{let n,i,r,a,o=e.window;for(;;){if(e.lookahead<=Be){if(it(e),e.lookahead<=Be&&t===ot)return $;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=N&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){a=e.strstart+Be;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<a);e.match_length=Be-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=N?(n=Ue(e,1,e.match_length-N),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Y(e,!1),e.strm.avail_out===0))return $}return e.insert=0,t===Pe?(Y(e,!0),e.strm.avail_out===0?nt:At):e.last_lit&&(Y(e,!1),e.strm.avail_out===0)?$:nn},Fc=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(it(e),e.lookahead===0)){if(t===ot)return $;break}if(e.match_length=0,n=Ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Y(e,!1),e.strm.avail_out===0))return $}return e.insert=0,t===Pe?(Y(e,!0),e.strm.avail_out===0?nt:At):e.last_lit&&(Y(e,!1),e.strm.avail_out===0)?$:nn};function de(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}var Ht=[new de(0,0,0,0,Dc),new de(4,4,8,4,tr),new de(4,5,16,8,tr),new de(4,6,32,32,tr),new de(4,4,16,16,Rt),new de(8,16,32,32,Rt),new de(8,16,128,128,Rt),new de(8,32,128,256,Rt),new de(32,128,258,1024,Rt),new de(32,258,258,4096,Rt)],Bc=e=>{e.window_size=2*e.w_size,Fe(e.head),e.max_lazy_match=Ht[e.level].max_lazy,e.good_match=Ht[e.level].good_length,e.nice_match=Ht[e.level].nice_length,e.max_chain_length=Ht[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=N-1,e.match_available=0,e.ins_h=0};function Mc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Yn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Cc*2),this.dyn_dtree=new Uint16Array((2*Sc+1)*2),this.bl_tree=new Uint16Array((2*Tc+1)*2),Fe(this.dyn_ltree),Fe(this.dyn_dtree),Fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ac+1),this.heap=new Uint16Array(2*cr+1),Fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*cr+1),Fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var ks=e=>{if(!e||!e.state)return Me(e,ae);e.total_in=e.total_out=0,e.data_type=bc;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Gn:et,e.adler=t.wrap===2?0:1,t.last_flush=ot,sc(t),_e},Is=e=>{let t=ks(e);return t===_e&&Bc(e.state),t},Uc=(e,t)=>!e||!e.state||e.state.wrap!==2?ae:(e.state.gzhead=t,_e),Os=(e,t,n,i,r,a)=>{if(!e)return ae;let o=1;if(t===pc&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>Ec||n!==Yn||i<8||i>15||t<0||t>9||a<0||a>wc)return Me(e,ae);i===8&&(i=9);let s=new Mc;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+N-1)/N),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=(1+2)*s.lit_bufsize,s.level=t,s.strategy=a,s.method=n,Is(e)},Pc=(e,t)=>Os(e,t,Yn,mc,vc,yc),qc=(e,t)=>{let n,i;if(!e||!e.state||t>No||t<0)return e?Me(e,ae):ae;let r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===jt&&t!==Pe)return Me(e,e.avail_out===0?er:ae);r.strm=e;let a=r.last_flush;if(r.last_flush=t,r.status===Gn)if(r.wrap===2)e.adler=0,B(r,31),B(r,139),B(r,8),r.gzhead?(B(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),B(r,r.gzhead.time&255),B(r,r.gzhead.time>>8&255),B(r,r.gzhead.time>>16&255),B(r,r.gzhead.time>>24&255),B(r,r.level===9?2:r.strategy>=Fn||r.level<2?4:0),B(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(B(r,r.gzhead.extra.length&255),B(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=W(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=dr):(B(r,0),B(r,0),B(r,0),B(r,0),B(r,0),B(r,r.level===9?2:r.strategy>=Fn||r.level<2?4:0),B(r,Ic),r.status=et);else{let o=Yn+(r.w_bits-8<<4)<<8,s=-1;r.strategy>=Fn||r.level<2?s=0:r.level<6?s=1:r.level===6?s=2:s=3,o|=s<<6,r.strstart!==0&&(o|=kc),o+=31-o%31,r.status=et,zt(r,o),r.strstart!==0&&(zt(r,e.adler>>>16),zt(r,e.adler&65535)),e.adler=1}if(r.status===dr)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=W(e.adler,r.pending_buf,r.pending-n,n)),Ne(e),n=r.pending,r.pending===r.pending_buf_size));)B(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=W(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=zn)}else r.status=zn;if(r.status===zn)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=W(e.adler,r.pending_buf,r.pending-n,n)),Ne(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,B(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=W(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.gzindex=0,r.status=jn)}else r.status=jn;if(r.status===jn)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=W(e.adler,r.pending_buf,r.pending-n,n)),Ne(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,B(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=W(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.status=Hn)}else r.status=Hn;if(r.status===Hn&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Ne(e),r.pending+2<=r.pending_buf_size&&(B(r,e.adler&255),B(r,e.adler>>8&255),e.adler=0,r.status=et)):r.status=et),r.pending!==0){if(Ne(e),e.avail_out===0)return r.last_flush=-1,_e}else if(e.avail_in===0&&Bo(t)<=Bo(a)&&t!==Pe)return Me(e,er);if(r.status===jt&&e.avail_in!==0)return Me(e,er);if(e.avail_in!==0||r.lookahead!==0||t!==ot&&r.status!==jt){let o=r.strategy===Fn?Fc(r,t):r.strategy===gc?Nc(r,t):Ht[r.level].func(r,t);if((o===nt||o===At)&&(r.status=jt),o===$||o===nt)return e.avail_out===0&&(r.last_flush=-1),_e;if(o===nn&&(t===hc?uc(r):t!==No&&(lc(r,0,0,!1),t===cc&&(Fe(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Ne(e),e.avail_out===0))return r.last_flush=-1,_e}return t!==Pe?_e:r.wrap<=0?Fo:(r.wrap===2?(B(r,e.adler&255),B(r,e.adler>>8&255),B(r,e.adler>>16&255),B(r,e.adler>>24&255),B(r,e.total_in&255),B(r,e.total_in>>8&255),B(r,e.total_in>>16&255),B(r,e.total_in>>24&255)):(zt(r,e.adler>>>16),zt(r,e.adler&65535)),Ne(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?_e:Fo)},zc=e=>{if(!e||!e.state)return ae;let t=e.state.status;return t!==Gn&&t!==dr&&t!==zn&&t!==jn&&t!==Hn&&t!==et&&t!==jt?Me(e,ae):(e.state=null,t===et?Me(e,dc):_e)},jc=(e,t)=>{let n=t.length;if(!e||!e.state)return ae;let i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==Gn||i.lookahead)return ae;if(r===1&&(e.adler=Vt(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(Fe(i.head),i.strstart=0,i.block_start=0,i.insert=0);let u=new Uint8Array(i.w_size);u.set(t.subarray(n-i.w_size,n),0),t=u,n=i.w_size}let a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,it(i);i.lookahead>=N;){let u=i.strstart,l=i.lookahead-(N-1);do i.ins_h=qe(i,i.ins_h,i.window[u+N-1]),i.prev[u&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=u,u++;while(--l);i.strstart=u,i.lookahead=N-1,it(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=N-1,i.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,i.wrap=r,_e},Hc=Pc,$c=Os,Zc=Is,Wc=ks,Yc=Uc,Gc=qc,Kc=zc,Xc=jc,Vc="pako deflate (from Nodeca project)",Zt={deflateInit:Hc,deflateInit2:$c,deflateReset:Zc,deflateResetKeep:Wc,deflateSetHeader:Yc,deflate:Gc,deflateEnd:Kc,deflateSetDictionary:Xc,deflateInfo:Vc},Jc=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Qc=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(!!n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(let i in n)Jc(n,i)&&(e[i]=n[i])}}return e},ed=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;let n=new Uint8Array(t);for(let i=0,r=0,a=e.length;i<a;i++){let o=e[i];n.set(o,r),r+=o.length}return n},Kn={assign:Qc,flattenChunks:ed},Ls=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ls=!1}var Jt=new Uint8Array(256);for(let e=0;e<256;e++)Jt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Jt[254]=Jt[254]=1;var td=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,r,a,o=e.length,s=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,r=0;a<s;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t},nd=(e,t)=>{if(t<65534&&e.subarray&&Ls)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n},id=(e,t)=>{let n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,r,a=new Array(n*2);for(r=0,i=0;i<n;){let o=e[i++];if(o<128){a[r++]=o;continue}let s=Jt[o];if(s>4){a[r++]=65533,i+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&i<n;)o=o<<6|e[i++]&63,s--;if(s>1){a[r++]=65533;continue}o<65536?a[r++]=o:(o-=65536,a[r++]=55296|o>>10&1023,a[r++]=56320|o&1023)}return nd(a,r)},rd=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Jt[e[n]]>t?n:t},Qt={string2buf:td,buf2string:id,utf8border:rd};function ad(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ds=ad,Ns=Object.prototype.toString,{Z_NO_FLUSH:od,Z_SYNC_FLUSH:sd,Z_FULL_FLUSH:ld,Z_FINISH:fd,Z_OK:Zn,Z_STREAM_END:ud,Z_DEFAULT_COMPRESSION:hd,Z_DEFAULT_STRATEGY:cd,Z_DEFLATED:dd}=at;function rn(e){this.options=Kn.assign({level:hd,method:dd,chunkSize:16384,windowBits:15,memLevel:8,strategy:cd},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ds,this.strm.avail_out=0;let n=Zt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Zn)throw new Error(tt[n]);if(t.header&&Zt.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=Qt.string2buf(t.dictionary):Ns.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=Zt.deflateSetDictionary(this.strm,i),n!==Zn)throw new Error(tt[n]);this._dict_set=!0}}rn.prototype.push=function(e,t){let n=this.strm,i=this.options.chunkSize,r,a;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?fd:od,typeof e=="string"?n.input=Qt.string2buf(e):Ns.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a===sd||a===ld)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=Zt.deflate(n,a),r===ud)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Zt.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Zn;if(n.avail_out===0){this.onData(n.output);continue}if(a>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};rn.prototype.onData=function(e){this.chunks.push(e)};rn.prototype.onEnd=function(e){e===Zn&&(this.result=Kn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function yr(e,t){let n=new rn(t);if(n.push(e,!0),n.err)throw n.msg||tt[n.err];return n.result}function pd(e,t){return t=t||{},t.raw=!0,yr(e,t)}function _d(e,t){return t=t||{},t.gzip=!0,yr(e,t)}var gd=rn,wd=yr,yd=pd,bd=_d,Ed=at,md={Deflate:gd,deflate:wd,deflateRaw:yd,gzip:bd,constants:Ed},Bn=30,vd=12,xd=function(t,n){let i,r,a,o,s,u,l,f,h,p,c,w,m,E,b,v,S,g,A,M,x,k,L,T,R=t.state;i=t.next_in,L=t.input,r=i+(t.avail_in-5),a=t.next_out,T=t.output,o=a-(n-t.avail_out),s=a+(t.avail_out-257),u=R.dmax,l=R.wsize,f=R.whave,h=R.wnext,p=R.window,c=R.hold,w=R.bits,m=R.lencode,E=R.distcode,b=(1<<R.lenbits)-1,v=(1<<R.distbits)-1;e:do{w<15&&(c+=L[i++]<<w,w+=8,c+=L[i++]<<w,w+=8),S=m[c&b];t:for(;;){if(g=S>>>24,c>>>=g,w-=g,g=S>>>16&255,g===0)T[a++]=S&65535;else if(g&16){A=S&65535,g&=15,g&&(w<g&&(c+=L[i++]<<w,w+=8),A+=c&(1<<g)-1,c>>>=g,w-=g),w<15&&(c+=L[i++]<<w,w+=8,c+=L[i++]<<w,w+=8),S=E[c&v];n:for(;;){if(g=S>>>24,c>>>=g,w-=g,g=S>>>16&255,g&16){if(M=S&65535,g&=15,w<g&&(c+=L[i++]<<w,w+=8,w<g&&(c+=L[i++]<<w,w+=8)),M+=c&(1<<g)-1,M>u){t.msg="invalid distance too far back",R.mode=Bn;break e}if(c>>>=g,w-=g,g=a-o,M>g){if(g=M-g,g>f&&R.sane){t.msg="invalid distance too far back",R.mode=Bn;break e}if(x=0,k=p,h===0){if(x+=l-g,g<A){A-=g;do T[a++]=p[x++];while(--g);x=a-M,k=T}}else if(h<g){if(x+=l+h-g,g-=h,g<A){A-=g;do T[a++]=p[x++];while(--g);if(x=0,h<A){g=h,A-=g;do T[a++]=p[x++];while(--g);x=a-M,k=T}}}else if(x+=h-g,g<A){A-=g;do T[a++]=p[x++];while(--g);x=a-M,k=T}for(;A>2;)T[a++]=k[x++],T[a++]=k[x++],T[a++]=k[x++],A-=3;A&&(T[a++]=k[x++],A>1&&(T[a++]=k[x++]))}else{x=a-M;do T[a++]=T[x++],T[a++]=T[x++],T[a++]=T[x++],A-=3;while(A>2);A&&(T[a++]=T[x++],A>1&&(T[a++]=T[x++]))}}else if((g&64)===0){S=E[(S&65535)+(c&(1<<g)-1)];continue n}else{t.msg="invalid distance code",R.mode=Bn;break e}break}}else if((g&64)===0){S=m[(S&65535)+(c&(1<<g)-1)];continue t}else if(g&32){R.mode=vd;break e}else{t.msg="invalid literal/length code",R.mode=Bn;break e}break}}while(i<r&&a<s);A=w>>3,i-=A,w-=A<<3,c&=(1<<w)-1,t.next_in=i,t.next_out=a,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=a<s?257+(s-a):257-(a-s),R.hold=c,R.bits=w},St=15,Mo=852,Uo=592,Po=0,nr=1,qo=2,Rd=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Sd=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Td=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Cd=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ad=(e,t,n,i,r,a,o,s)=>{let u=s.bits,l=0,f=0,h=0,p=0,c=0,w=0,m=0,E=0,b=0,v=0,S,g,A,M,x,k=null,L=0,T,R=new Uint16Array(St+1),G=new Uint16Array(St+1),ge=null,P=0,H,Q,we;for(l=0;l<=St;l++)R[l]=0;for(f=0;f<i;f++)R[t[n+f]]++;for(c=u,p=St;p>=1&&R[p]===0;p--);if(c>p&&(c=p),p===0)return r[a++]=1<<24|64<<16|0,r[a++]=1<<24|64<<16|0,s.bits=1,0;for(h=1;h<p&&R[h]===0;h++);for(c<h&&(c=h),E=1,l=1;l<=St;l++)if(E<<=1,E-=R[l],E<0)return-1;if(E>0&&(e===Po||p!==1))return-1;for(G[1]=0,l=1;l<St;l++)G[l+1]=G[l]+R[l];for(f=0;f<i;f++)t[n+f]!==0&&(o[G[t[n+f]]++]=f);if(e===Po?(k=ge=o,T=19):e===nr?(k=Rd,L-=257,ge=Sd,P-=257,T=256):(k=Td,ge=Cd,T=-1),v=0,f=0,l=h,x=a,w=c,m=0,A=-1,b=1<<c,M=b-1,e===nr&&b>Mo||e===qo&&b>Uo)return 1;for(;;){H=l-m,o[f]<T?(Q=0,we=o[f]):o[f]>T?(Q=ge[P+o[f]],we=k[L+o[f]]):(Q=32+64,we=0),S=1<<l-m,g=1<<w,h=g;do g-=S,r[x+(v>>m)+g]=H<<24|Q<<16|we|0;while(g!==0);for(S=1<<l-1;v&S;)S>>=1;if(S!==0?(v&=S-1,v+=S):v=0,f++,--R[l]===0){if(l===p)break;l=t[n+o[f]]}if(l>c&&(v&M)!==A){for(m===0&&(m=c),x+=h,w=l-m,E=1<<w;w+m<p&&(E-=R[w+m],!(E<=0));)w++,E<<=1;if(b+=1<<w,e===nr&&b>Mo||e===qo&&b>Uo)return 1;A=v&M,r[A]=c<<24|w<<16|x-a|0}}return v!==0&&(r[x+v]=l-m<<24|64<<16|0),s.bits=c,0},Wt=Ad,kd=0,Fs=1,Bs=2,{Z_FINISH:zo,Z_BLOCK:Id,Z_TREES:Mn,Z_OK:rt,Z_STREAM_END:Od,Z_NEED_DICT:Ld,Z_STREAM_ERROR:oe,Z_DATA_ERROR:Ms,Z_MEM_ERROR:Us,Z_BUF_ERROR:Dd,Z_DEFLATED:jo}=at,Ps=1,Ho=2,$o=3,Zo=4,Wo=5,Yo=6,Go=7,Ko=8,Xo=9,Vo=10,Wn=11,Se=12,ir=13,Jo=14,rr=15,Qo=16,es=17,ts=18,ns=19,Un=20,Pn=21,is=22,rs=23,as=24,os=25,ss=26,ar=27,ls=28,fs=29,q=30,qs=31,Nd=32,Fd=852,Bd=592,Md=15,Ud=Md,us=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Pd(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var zs=e=>{if(!e||!e.state)return oe;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Ps,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Fd),t.distcode=t.distdyn=new Int32Array(Bd),t.sane=1,t.back=-1,rt},js=e=>{if(!e||!e.state)return oe;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,zs(e)},Hs=(e,t)=>{let n;if(!e||!e.state)return oe;let i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?oe:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,js(e))},$s=(e,t)=>{if(!e)return oe;let n=new Pd;e.state=n,n.window=null;let i=Hs(e,t);return i!==rt&&(e.state=null),i},qd=e=>$s(e,Ud),hs=!0,or,sr,zd=e=>{if(hs){or=new Int32Array(512),sr=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Wt(Fs,e.lens,0,288,or,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Wt(Bs,e.lens,0,32,sr,0,e.work,{bits:5}),hs=!1}e.lencode=or,e.lenbits=9,e.distcode=sr,e.distbits=5},Zs=(e,t,n,i)=>{let r,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(t.subarray(n-i,n-i+r),a.wnext),i-=r,i?(a.window.set(t.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},jd=(e,t)=>{let n,i,r,a,o,s,u,l,f,h,p,c,w,m,E=0,b,v,S,g,A,M,x,k,L=new Uint8Array(4),T,R,G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return oe;n=e.state,n.mode===Se&&(n.mode=ir),o=e.next_out,r=e.output,u=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,l=n.hold,f=n.bits,h=s,p=u,k=rt;e:for(;;)switch(n.mode){case Ps:if(n.wrap===0){n.mode=ir;break}for(;f<16;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(n.wrap&2&&l===35615){n.check=0,L[0]=l&255,L[1]=l>>>8&255,n.check=W(n.check,L,2,0),l=0,f=0,n.mode=Ho;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=q;break}if((l&15)!==jo){e.msg="unknown compression method",n.mode=q;break}if(l>>>=4,f-=4,x=(l&15)+8,n.wbits===0)n.wbits=x;else if(x>n.wbits){e.msg="invalid window size",n.mode=q;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=l&512?Vo:Se,l=0,f=0;break;case Ho:for(;f<16;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(n.flags=l,(n.flags&255)!==jo){e.msg="unknown compression method",n.mode=q;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=q;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&(L[0]=l&255,L[1]=l>>>8&255,n.check=W(n.check,L,2,0)),l=0,f=0,n.mode=$o;case $o:for(;f<32;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}n.head&&(n.head.time=l),n.flags&512&&(L[0]=l&255,L[1]=l>>>8&255,L[2]=l>>>16&255,L[3]=l>>>24&255,n.check=W(n.check,L,4,0)),l=0,f=0,n.mode=Zo;case Zo:for(;f<16;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&(L[0]=l&255,L[1]=l>>>8&255,n.check=W(n.check,L,2,0)),l=0,f=0,n.mode=Wo;case Wo:if(n.flags&1024){for(;f<16;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&(L[0]=l&255,L[1]=l>>>8&255,n.check=W(n.check,L,2,0)),l=0,f=0}else n.head&&(n.head.extra=null);n.mode=Yo;case Yo:if(n.flags&1024&&(c=n.length,c>s&&(c=s),c&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+c),x)),n.flags&512&&(n.check=W(n.check,i,c,a)),s-=c,a+=c,n.length-=c),n.length))break e;n.length=0,n.mode=Go;case Go:if(n.flags&2048){if(s===0)break e;c=0;do x=i[a+c++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x));while(x&&c<s);if(n.flags&512&&(n.check=W(n.check,i,c,a)),s-=c,a+=c,x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Ko;case Ko:if(n.flags&4096){if(s===0)break e;c=0;do x=i[a+c++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x));while(x&&c<s);if(n.flags&512&&(n.check=W(n.check,i,c,a)),s-=c,a+=c,x)break e}else n.head&&(n.head.comment=null);n.mode=Xo;case Xo:if(n.flags&512){for(;f<16;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=q;break}l=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Se;break;case Vo:for(;f<32;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}e.adler=n.check=us(l),l=0,f=0,n.mode=Wn;case Wn:if(n.havedict===0)return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=f,Ld;e.adler=n.check=1,n.mode=Se;case Se:if(t===Id||t===Mn)break e;case ir:if(n.last){l>>>=f&7,f-=f&7,n.mode=ar;break}for(;f<3;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}switch(n.last=l&1,l>>>=1,f-=1,l&3){case 0:n.mode=Jo;break;case 1:if(zd(n),n.mode=Un,t===Mn){l>>>=2,f-=2;break e}break;case 2:n.mode=es;break;case 3:e.msg="invalid block type",n.mode=q}l>>>=2,f-=2;break;case Jo:for(l>>>=f&7,f-=f&7;f<32;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=q;break}if(n.length=l&65535,l=0,f=0,n.mode=rr,t===Mn)break e;case rr:n.mode=Qo;case Qo:if(c=n.length,c){if(c>s&&(c=s),c>u&&(c=u),c===0)break e;r.set(i.subarray(a,a+c),o),s-=c,a+=c,u-=c,o+=c,n.length-=c;break}n.mode=Se;break;case es:for(;f<14;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(n.nlen=(l&31)+257,l>>>=5,f-=5,n.ndist=(l&31)+1,l>>>=5,f-=5,n.ncode=(l&15)+4,l>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=q;break}n.have=0,n.mode=ts;case ts:for(;n.have<n.ncode;){for(;f<3;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}n.lens[G[n.have++]]=l&7,l>>>=3,f-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},k=Wt(kd,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,k){e.msg="invalid code lengths set",n.mode=q;break}n.have=0,n.mode=ns;case ns:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[l&(1<<n.lenbits)-1],b=E>>>24,v=E>>>16&255,S=E&65535,!(b<=f);){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(S<16)l>>>=b,f-=b,n.lens[n.have++]=S;else{if(S===16){for(R=b+2;f<R;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(l>>>=b,f-=b,n.have===0){e.msg="invalid bit length repeat",n.mode=q;break}x=n.lens[n.have-1],c=3+(l&3),l>>>=2,f-=2}else if(S===17){for(R=b+3;f<R;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}l>>>=b,f-=b,x=0,c=3+(l&7),l>>>=3,f-=3}else{for(R=b+7;f<R;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}l>>>=b,f-=b,x=0,c=11+(l&127),l>>>=7,f-=7}if(n.have+c>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=q;break}for(;c--;)n.lens[n.have++]=x}}if(n.mode===q)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=q;break}if(n.lenbits=9,T={bits:n.lenbits},k=Wt(Fs,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,k){e.msg="invalid literal/lengths set",n.mode=q;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},k=Wt(Bs,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,k){e.msg="invalid distances set",n.mode=q;break}if(n.mode=Un,t===Mn)break e;case Un:n.mode=Pn;case Pn:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=f,xd(e,p),o=e.next_out,r=e.output,u=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,l=n.hold,f=n.bits,n.mode===Se&&(n.back=-1);break}for(n.back=0;E=n.lencode[l&(1<<n.lenbits)-1],b=E>>>24,v=E>>>16&255,S=E&65535,!(b<=f);){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(v&&(v&240)===0){for(g=b,A=v,M=S;E=n.lencode[M+((l&(1<<g+A)-1)>>g)],b=E>>>24,v=E>>>16&255,S=E&65535,!(g+b<=f);){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}l>>>=g,f-=g,n.back+=g}if(l>>>=b,f-=b,n.back+=b,n.length=S,v===0){n.mode=ss;break}if(v&32){n.back=-1,n.mode=Se;break}if(v&64){e.msg="invalid literal/length code",n.mode=q;break}n.extra=v&15,n.mode=is;case is:if(n.extra){for(R=n.extra;f<R;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=rs;case rs:for(;E=n.distcode[l&(1<<n.distbits)-1],b=E>>>24,v=E>>>16&255,S=E&65535,!(b<=f);){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if((v&240)===0){for(g=b,A=v,M=S;E=n.distcode[M+((l&(1<<g+A)-1)>>g)],b=E>>>24,v=E>>>16&255,S=E&65535,!(g+b<=f);){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}l>>>=g,f-=g,n.back+=g}if(l>>>=b,f-=b,n.back+=b,v&64){e.msg="invalid distance code",n.mode=q;break}n.offset=S,n.extra=v&15,n.mode=as;case as:if(n.extra){for(R=n.extra;f<R;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=q;break}n.mode=os;case os:if(u===0)break e;if(c=p-u,n.offset>c){if(c=n.offset-c,c>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=q;break}c>n.wnext?(c-=n.wnext,w=n.wsize-c):w=n.wnext-c,c>n.length&&(c=n.length),m=n.window}else m=r,w=o-n.offset,c=n.length;c>u&&(c=u),u-=c,n.length-=c;do r[o++]=m[w++];while(--c);n.length===0&&(n.mode=Pn);break;case ss:if(u===0)break e;r[o++]=n.length,u--,n.mode=Pn;break;case ar:if(n.wrap){for(;f<32;){if(s===0)break e;s--,l|=i[a++]<<f,f+=8}if(p-=u,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?W(n.check,r,p,o-p):Vt(n.check,r,p,o-p)),p=u,(n.flags?l:us(l))!==n.check){e.msg="incorrect data check",n.mode=q;break}l=0,f=0}n.mode=ls;case ls:if(n.wrap&&n.flags){for(;f<32;){if(s===0)break e;s--,l+=i[a++]<<f,f+=8}if(l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=q;break}l=0,f=0}n.mode=fs;case fs:k=Od;break e;case q:k=Ms;break e;case qs:return Us;case Nd:default:return oe}return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=f,(n.wsize||p!==e.avail_out&&n.mode<q&&(n.mode<ar||t!==zo))&&Zs(e,e.output,e.next_out,p-e.avail_out),h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?W(n.check,r,p,e.next_out-p):Vt(n.check,r,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Se?128:0)+(n.mode===Un||n.mode===rr?256:0),(h===0&&p===0||t===zo)&&k===rt&&(k=Dd),k},Hd=e=>{if(!e||!e.state)return oe;let t=e.state;return t.window&&(t.window=null),e.state=null,rt},$d=(e,t)=>{if(!e||!e.state)return oe;let n=e.state;return(n.wrap&2)===0?oe:(n.head=t,t.done=!1,rt)},Zd=(e,t)=>{let n=t.length,i,r,a;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==Wn)?oe:i.mode===Wn&&(r=1,r=Vt(r,t,n,0),r!==i.check)?Ms:(a=Zs(e,t,n,n),a?(i.mode=qs,Us):(i.havedict=1,rt))},Wd=js,Yd=Hs,Gd=zs,Kd=qd,Xd=$s,Vd=jd,Jd=Hd,Qd=$d,e0=Zd,t0="pako inflate (from Nodeca project)",Ce={inflateReset:Wd,inflateReset2:Yd,inflateResetKeep:Gd,inflateInit:Kd,inflateInit2:Xd,inflate:Vd,inflateEnd:Jd,inflateGetHeader:Qd,inflateSetDictionary:e0,inflateInfo:t0};function n0(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var i0=n0,Ws=Object.prototype.toString,{Z_NO_FLUSH:r0,Z_FINISH:a0,Z_OK:en,Z_STREAM_END:lr,Z_NEED_DICT:fr,Z_STREAM_ERROR:o0,Z_DATA_ERROR:cs,Z_MEM_ERROR:s0}=at;function an(e){this.options=Kn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ds,this.strm.avail_out=0;let n=Ce.inflateInit2(this.strm,t.windowBits);if(n!==en)throw new Error(tt[n]);if(this.header=new i0,Ce.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Qt.string2buf(t.dictionary):Ws.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ce.inflateSetDictionary(this.strm,t.dictionary),n!==en)))throw new Error(tt[n])}an.prototype.push=function(e,t){let n=this.strm,i=this.options.chunkSize,r=this.options.dictionary,a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?a0:r0,Ws.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=Ce.inflate(n,o),a===fr&&r&&(a=Ce.inflateSetDictionary(n,r),a===en?a=Ce.inflate(n,o):a===cs&&(a=fr));n.avail_in>0&&a===lr&&n.state.wrap>0&&e[n.next_in]!==0;)Ce.inflateReset(n),a=Ce.inflate(n,o);switch(a){case o0:case cs:case fr:case s0:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===lr))if(this.options.to==="string"){let u=Qt.utf8border(n.output,n.next_out),l=n.next_out-u,f=Qt.buf2string(n.output,u);n.next_out=l,n.avail_out=i-l,l&&n.output.set(n.output.subarray(u,u+l),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===en&&s===0)){if(a===lr)return a=Ce.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};an.prototype.onData=function(e){this.chunks.push(e)};an.prototype.onEnd=function(e){e===en&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Kn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function br(e,t){let n=new an(t);if(n.push(e),n.err)throw n.msg||tt[n.err];return n.result}function l0(e,t){return t=t||{},t.raw=!0,br(e,t)}var f0=an,u0=br,h0=l0,c0=br,d0=at,p0={Inflate:f0,inflate:u0,inflateRaw:h0,ungzip:c0,constants:d0},{Deflate:_0,deflate:g0,deflateRaw:w0,gzip:y0}=md,{Inflate:b0,inflate:E0,inflateRaw:m0,ungzip:v0}=p0,x0=_0,R0=g0,S0=w0,T0=y0,C0=b0,A0=E0,k0=m0,I0=v0,O0=at,Ys={Deflate:x0,deflate:R0,deflateRaw:S0,gzip:T0,Inflate:C0,inflate:A0,inflateRaw:k0,ungzip:I0,constants:O0};var Cr=lt(Er()),gl=lt(Xs()),sn=lt(ll()),wl=16e3,It=12,xr=8121,kt=wl-It,Ae=[33451,33229,4757,41419],Sr={host:0,srflx:1,relay:2},z0={active:0,passive:1,so:2},st={TYPE:0,PROTOCOL:1,IP:2,PORT:3,RELATED_IP:4,RELATED_PORT:5,TCP_TYPE:6},j0=[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}],H0=[{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"}],Qn=window.navigator.userAgent,$0=!!Qn.match(/iPad/i)||!!Qn.match(/iPhone/i),Z0=!!Qn.match(/WebKit/i),hl=!!($0&&Z0&&!Qn.match(/CriOS/i)),W0=navigator?.userAgent.toLowerCase().indexOf("firefox")>-1,{decode:Y0}=Er(),G0=ul(),cl=e=>(0,Cr.encode)((0,gl.hexToBytes)(e)),K0=e=>G0(Y0(e));function dl(e,t,n,i){let r=K0(i),a="";for(let s=0;s<r.length;s+=2)a+=`${r[s]}${r[s+1]}${s===r.length-2?"":":"}`.toUpperCase();let o=["v=0","o=- 5498186869896684180 2 IN IP4 127.0.0.1","s=-","t=0 0","a=msid-semantic: WMS","m=application 9 UDP/DTLS/SCTP webrtc-datachannel","c=IN IP4 0.0.0.0","a=mid:0","a=sctp-port:5000"];return e?o.push("a=setup:actpass"):o.push("a=setup:active"),o.push(`a=ice-ufrag:${t}`),o.push(`a=ice-pwd:${n}`),o.push(`a=fingerprint:sha-256 ${a}`),o.join(`\r
`)+`\r
`}var X0=e=>{let t;e.indexOf("a=candidate:")===0?t=e.substring(12).split(" "):t=e.substring(10).split(" ");let n=[Sr[t[7]],t[2].toLowerCase()==="udp"?0:1,t[4],parseInt(t[5],10)];for(let i=8;i<t.length;i+=2)switch(t[i]){case"raddr":for(;n.length<5;)n.push(null);n[4]=t[i+1];break;case"rport":for(;n.length<6;)n.push(null);n[5]=parseInt(t[i+1],10);break;case"tcptype":for(;n.length<7;)n.push(null);n[6]=z0[t[i+1]];break;default:break}for(;n.length<8;)n.push(null);return n[7]=parseInt(t[3],10),n},Tr=class extends _l.default{constructor(t="",n="",i={}){if(super(),!t||t.length<4)throw new Error("Client ID must be at least four characters");if(!n||n.length<4)throw new Error("Room ID must be at least four characters");this._step=this._step.bind(this),this.peers=new Map,this.msgChunks=new Map,this.connectedSessions=[],this.clientId=t,this.roomId=n,this.sessionId=sn.default.generate({length:20}),this.packages=[],this.dataTimestamp=null,this.lastPackages=null,this.lastProcessedReceivedDataTimestamps=new Map,this.packageReceivedFromPeers=new Set,this.startedAtTimestamp=null,this.workerUrl=i.workerUrl||"https://p2pcf.minddrop.workers.dev",this.workerUrl.endsWith("/")&&(this.workerUrl=this.workerUrl.substring(0,this.workerUrl.length-1)),this.stunIceServers=i.stunIceServers||j0,this.turnIceServers=i.turnIceServers||H0,this.networkChangePollIntervalMs=i.networkChangePollIntervalMs||15e3,this.stateExpirationIntervalMs=i.stateExpirationIntervalMs||2*60*1e3,this.stateHeartbeatWindowMs=i.stateHeartbeatWindowMs||3e4,this.fastPollingDurationMs=i.fastPollingDurationMs||1e4,this.fastPollingRateMs=i.fastPollingRateMs||750,this.slowPollingRateMs=i.slowPollingRateMs||1500,this.wrtc=(0,pl.default)(),this.dtlsCert=null,this.udpEnabled=null,this.isSymmetric=null,this.reflexiveIps=null,this.dtlsFingerprint=null,this.isSending=!1,this.finished=!1,this.nextStepTime=-1,this.deleteKey=null,this.sentFirstPoll=!1,this.stopFastPollingAt=-1,window.history.state?._p2pcfContextId||window.history.replaceState({...window.history.state,_p2pcfContextId:sn.default.generate({length:20})},window.location.href),this.contextId=window.history.state._p2pcfContextId}async _init(){this.dtlsCert===null&&(this.dtlsCert=await this.wrtc.RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256"}))}async _step(t=!1){let{sessionId:n,clientId:i,roomId:r,contextId:a,stateExpirationIntervalMs:o,stateHeartbeatWindowMs:s,packages:u,fastPollingDurationMs:l,fastPollingRateMs:f,slowPollingRateMs:h}=this,p=new Date().getTime();if(t){if(this.finished||!this.deleteKey)return;this.finished=!0}else if(this.nextStepTime>p||this.isSending||this.reflexiveIps.length===0)return;this.isSending=!0;try{let c=cl(this.dtlsFingerprint.replaceAll(":","")),w=[n,i,this.isSymmetric,c,this.startedAtTimestamp,[...this.reflexiveIps]],m={r,k:a};t&&(m.dk=this.deleteKey);let E=this.dataTimestamp===null||p-this.dataTimestamp>=o-s,b=this.lastPackages!==JSON.stringify(u),v=!1;if(E||b||t){this.dataTimestamp=p;for(let P=0;P<u.length;P++){let H=u[P][u[P].length-2];p-H>60*1e3&&(u[P]=null)}for(;u.indexOf(null)>=0;)u.splice(u.indexOf(null),1);v=!0}t&&(v=!1),this.sentFirstPoll&&(m.d=w,m.t=this.dataTimestamp,m.x=this.stateExpirationIntervalMs,v&&(m.p=u,this.lastPackages=JSON.stringify(u)));let S=JSON.stringify(m),g=(0,Cr.encode)(Ys.deflate(S)),A={"Content-Type":"application/json "},M=!1;S.length>g.length&&(S=g,A["Content-Type"]="application/json",A["Content-Encoding"]="text/plain",A["Content-Length"]=g.length),t&&(A["X-Worker-Method"]="DELETE",M=!0);let x=await fetch(this.workerUrl,{method:"POST",headers:A,body:S,keepalive:M}),{ps:k,pk:L,dk:T}=await x.json();if(T&&(this.deleteKey=T),t)return;if(k.length===0&&!this.sentFirstPoll){m.d=w,m.t=this.dataTimestamp,m.x=this.stateExpirationIntervalMs,m.p=u,this.lastPackages=JSON.stringify(u);let P=await fetch(this.workerUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),{dk:H}=await P.json();H&&(this.deleteKey=H)}this.sentFirstPoll=!0;let R=[...this.peers.keys()];this._handleWorkerResponse(w,c,u,k,L);let G=k.map(P=>P[0]);(R.length!==G.length||G.find(P=>!R.includes(P))||R.find(P=>!G.includes(P)))&&(this.stopFastPollingAt=p+l),p<this.stopFastPollingAt?this.nextStepTime=p+f:this.nextStepTime=p+h}catch(c){console.error(c),this.nextStepTime=p+h}finally{this.isSending=!1}}_handleWorkerResponse(t,n,i,r,a){let o=this.startedAtTimestamp,{dtlsCert:s,peers:u,lastProcessedReceivedDataTimestamps:l,packageReceivedFromPeers:f,stunIceServers:h,turnIceServers:p}=this,[c,,w]=t,m=new Date().getTime();for(let b of r){let[v,S,g,A,M,x,k]=b;if(l.get(v)===k)continue;let L=w===g?o===M?c>v:o>M:w,T=w||g?p:h,R=W0,G=a.find(P=>P[1]===v),ge={iceServers:T};if(s&&(ge.certificates=[s]),L){if(u.has(v)||!G||(l.set(v,k),f.has(v)))continue;f.add(v);let[,,P,H,Q,we,X,,ye]=G,ee=new Rr.default({config:ge,initiator:!1,iceCompleteTimeout:3e3,sdpTransform:K=>{let fn=[];for(let ei of K.split(`\r
`))ei.startsWith("a=ice-ufrag")?fn.push(`a=ice-ufrag:${we}`):ei.startsWith("a=ice-pwd")?fn.push(`a=ice-pwd:${X}`):fn.push(ei);return fn.join(`\r
`)}});ee.id=v,ee.client_id=S,this._wireUpCommonPeerEvents(ee),u.set(ee.id,ee);let ze=[v,c,null,null,null,null,null,m,[]],ln=ze[ze.length-1],Ot=K=>{!K.candidate?.candidate||ln.push(K.candidate.candidate)};ee.on("signal",Ot);let je=()=>{ee.removeListener("signal",Ot),!i.includes(ze)&&ln.length!==0&&i.push(ze)};ee.once("_iceComplete",je);let Lt=dl(!0,P,H,Q);for(let K of ye)ee.signal({candidate:{candidate:K,sdpMLineIndex:0}});ee.signal({type:"offer",sdp:Lt})}else{if(!u.has(v)){l.set(v,k);let Q=sn.default.generate({length:12}),we=sn.default.generate({length:32}),X=new Rr.default({config:ge,iceCompleteTimeout:3e3,initiator:!0});X.id=v,X.client_id=S,this._wireUpCommonPeerEvents(X),u.set(X.id,X);let ye=[v,c,null,null,null,Q,we,m,[]],ee=ye[ye.length-1],ze=je=>{!je.candidate?.candidate||ee.push(je.candidate.candidate)};X.on("signal",ze);let ln=()=>{X.removeListener("signal",ze),!i.includes(ye)&&ee.length!==0&&i.push(ye)};X.once("_iceComplete",ln);let Ot=je=>{if(je.type!=="offer")return;X.removeListener("signal",Ot);for(let K of je.sdp.split(`\r
`))switch(K.split(":")[0]){case"a=ice-ufrag":ye[2]=K.substring(12);break;case"a=ice-pwd":ye[3]=K.substring(10);break;case"a=fingerprint":ye[4]=cl(K.substring(22).replaceAll(":",""));break}let Lt=dl(!1,Q,we,A);for(let K=0;K<x.length;K++)Lt+=`a=candidate:0 1 udp ${K+1} ${x[K]} 30000 typ srflx\r
`;R?X._pendingRemoteSdp=Lt:X.signal({type:"answer",sdp:Lt})};X.once("signal",Ot)}if(!G)continue;let[,,,,,,,,P]=G;if(f.has(v)||!u.has(v))continue;let H=u.get(v);if(R&&!H._pc.remoteDescription&&H._pendingRemoteSdp){if(!H.connected)for(let Q of P)H.signal({candidate:{candidate:Q,sdpMLineIndex:0}});H.signal({type:"answer",sdp:H._pendingRemoteSdp}),delete H._pendingRemoteSdp,f.add(v)}if(!R&&H._pc.remoteDescription&&P.length>0){if(!H.connected)for(let Q of P)H.signal({candidate:{candidate:Q,sdpMLineIndex:0}});f.add(v)}}}let E=r.map(b=>b[0]);for(let[b,v]of u.entries())E.includes(b)||this._removePeer(v,!0)}async start(){this.startedAtTimestamp=new Date().getTime(),await this._init();let[t,n,i,r]=await this._getNetworkSettings(this.dtlsCert);this.udpEnabled=t,this.isSymmetric=n,this.reflexiveIps=i,this.dtlsFingerprint=r,this.networkSettingsInterval=setInterval(async()=>{let[a,o,s,u]=await this._getNetworkSettings(this.dtlsCert),l=!1;for(let f of this.reflexiveIps)for(let h of s)f===h&&(l=!0);if(a!==this.udpEnabled||o!==this.isSymmetric||u!==this.dtlsFingerprint||!l){this.packages.length=0;for(let f of this.peers.values())this._removePeer(f,!0),this.lastProcessedReceivedDataTimestamps.delete(f.id);this.dataTimestamp=null,this.lastPackages=null,this.udpEnabled=a,this.isSymmetric=o,this.reflexiveIps=s,this.dtlsFingerprint=u}},this.networkChangePollIntervalMs),this._step=this._step.bind(this),this.stepInterval=setInterval(this._step,500),this.destroyOnUnload=()=>this.destroy();for(let a of hl?["pagehide"]:["beforeunload","unload"])window.addEventListener(a,this.destroyOnUnload)}_removePeer(t,n=!1){let{packageReceivedFromPeers:i,packages:r,peers:a}=this;if(!!a.has(t.id)){for(let o=0;o<r.length;o++)r[o][0]===t.id&&(r[o]=null);for(;r.indexOf(null)>=0;)r.splice(r.indexOf(null),1);i.delete(t.id),a.delete(t.id),n&&t.destroy(),this.emit("peerclose",t)}}send(t,n){return new Promise((i,r)=>{let a=null,o=null;if(n instanceof ArrayBuffer)a=n;else if(n instanceof Uint8Array)n.buffer.byteLength===n.length?a=n.buffer:a=n.buffer.slice(n.byteOffset,n.byteLength+n.byteOffset);else throw new Error("Unsupported send data type",n);if((a.byteLength>wl||new Uint16Array(a,0,1)===xr)&&(o=Math.floor(Math.random()*256*128)),o!==null)for(let s=0,u=0;s<a.byteLength;s+=kt,u++){let l=Math.min(kt,a.byteLength-s),f=It+l;for(;f%4!==0;)f++;let h=new ArrayBuffer(f);new Uint8Array(h,It).set(new Uint8Array(a,s,l));let p=new Uint16Array(h),c=new Uint32Array(h);p[0]=xr,p[1]=o,p[2]=u,p[3]=s+kt>=a.byteLength?1:0,c[2]=a.byteLength,t.send(h)}else t.send(a)})}broadcast(t){let n=[];for(let i of this.peers.values())!i.connected||n.push(this.send(i,t));return Promise.all(n)}destroy(){if(this._step&&this._step(!0),this.networkSettingsInterval&&(clearInterval(this.networkSettingsInterval),this.networkSettingsInterval=null),this.stepInterval&&(clearInterval(this.stepInterval),this.stepInterval=null),this.destroyOnUnload){for(let t of hl?["pagehide"]:["beforeunload","unload"])window.removeEventListener(t,this.destroyOnUnload);this.destroyOnUnload=null}for(let t of this.peers.values())t.destroy()}_chunkHandler(t,n,i){let r=null;if(this.msgChunks.has(n))r=this.msgChunks.get(n);else{let s=new Uint32Array(t.buffer,t.byteOffset,3)[2];r=new Uint8Array(s),this.msgChunks.set(n,r)}let a=i*kt,o=Math.min(r.byteLength-a,kt);return r.set(new Uint8Array(t.buffer,t.byteOffset+It,o),i*kt),r}_updateConnectedSessions(){this.connectedSessions.length=0;for(let[t,n]of this.peers)if(n.connected){this.connectedSessions.push(t);continue}}async _getNetworkSettings(){await this._init();let t=null,n=[],i=new Set,r={iceServers:this.stunIceServers};this.dtlsCert&&(r.certificates=[this.dtlsCert]);let a=new this.wrtc.RTCPeerConnection(r);a.createDataChannel("x");let o=new Promise(l=>{setTimeout(()=>l(),5e3),a.onicecandidate=f=>{if(!f.candidate)return l();f.candidate.candidate&&n.push(X0(f.candidate.candidate))}});a.createOffer().then(l=>{for(let f of l.sdp.split(`
`))f.indexOf("a=fingerprint")!==-1&&(t=f.split(" ")[1].trim());a.setLocalDescription(l)}),await o,a.close();let s=!1,u=!1;e:for(let l of n)if(l[0]===Sr.srflx){u=!0,i.add(l[st.IP]);for(let f of n)if(f[0]===Sr.srflx&&l!==f&&typeof l[st.RELATED_PORT]=="number"&&typeof f[st.RELATED_PORT]=="number"&&l[st.RELATED_PORT]===f[st.RELATED_PORT]&&l[st.PORT]!==f[st.PORT]){s=!0;break}}return[u,s,i,t]}_handlePeerError(t,n){n.errorDetail==="sctp-failure"&&n.message.indexOf("User-Initiated Abort")>=0||console.error(n)}_checkForSignalOrEmitMessage(t,n){if(n.buffer.byteLength<Ae.length*2){this.emit("msg",t,n);return}let i=new Uint16Array(n.buffer,n.byteOffset,Ae.length);for(let o=0;o<Ae.length;o++)if(i[o]!==Ae[o]){this.emit("msg",t,n);return}let r=new Uint8Array(n.buffer,n.byteOffset+Ae.length*2),a=new TextDecoder("utf-8").decode(r);a.endsWith("\0")&&(a=a.substring(0,a.length-1)),t.signal(a)}_wireUpCommonPeerEvents(t){t.on("connect",()=>{this.emit("peerconnect",t),this._updateConnectedSessions()}),t.on("data",n=>{let i=null,r=null;if(n.length>=It&&(r=new Uint16Array(n.buffer,n.byteOffset,It/2),r[0]===xr&&(i=r[1])),i!==null)try{let a=r[2],o=r[3]!==0,s=this._chunkHandler(n,i,a,o);o&&(this._checkForSignalOrEmitMessage(t,s),this.msgChunks.delete(i))}catch(a){console.error(a)}else this._checkForSignalOrEmitMessage(t,n)}),t.on("error",()=>{this._removePeer(t),this._updateConnectedSessions()}),t.on("close",()=>{this._removePeer(t),this._updateConnectedSessions()}),t.once("_iceComplete",()=>{t.on("signal",n=>{let i=new TextEncoder().encode(JSON.stringify(n)),r=i.byteLength+Ae.length*2;r%2!==0&&r++;let a=new ArrayBuffer(r),o=new Uint8Array(a),s=new Uint16Array(a);o.set(i,Ae.length*2);for(let u=0;u<Ae.length;u++)s[u]=Ae[u];this.send(t,a)})})}};export{Tr as default};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
